!function(){class t{constructor(t,e=(()=>{}),i={}){const{min:s=0,max:r=100,format:l="$1,000.00",language:a="en"}=i,n=l.replace(/\d/g,"").split(""),o=n[0],c=n[n.length-1],h="."===c?",":".";this.formatCharacters={currencySymbol:o,decimalDelimiter:c,thousandsDelimiter:h},this.priceFormatLanguage="."===c?"en-us":"en-uk",this.elem=t,this.updateCallback=e,this.barElem=t.querySelector(".js-price-range__bar"),this.absoluteMin=null,this.absoluteMax=null,this.pctBasis=null,this.min=null,this.max=null,this.EVENT_NAMES={MOUSE:{start:"mousedown",move:"mousemove",end:"mouseup"},TOUCH:{start:"touchstart",move:"touchmove",end:"touchend"}},this.activeOrb=null,this.orbs=Array.from(t.querySelectorAll(".js-price-range__bar-orb")).reduce(((t,e)=>(t[e.dataset.val]={pct:null,elem:e},t)),{}),this.inputs=Array.from(t.querySelectorAll(".js-price-range__inputs-input")).reduce(((t,e)=>(e.addEventListener("keydown",(t=>{if(188===t.keyCode||190===t.keyCode||110===t.keyCode)return t.preventDefault(),!1})),t[e.dataset.val]={elem:e.closest(".js-price-range__inputs-input__outer"),input:e},t)),{}),this.updateBaseValues(s,r),this.updateOrb("min"),this.updateOrb("max"),this.bindEvents()}static normalizePageXY(t){const e=t.touches,i=e?e[0]:t;return{pageX:i.pageX,pageY:i.pageY}}generatePct(t){return(t-this.absoluteMin)/this.pctBasis}generatePrice(t){return Math.round(this.absoluteMin+this.pctBasis*t)}_generateMouseupFunction(t,e){return function(){document.removeEventListener(t.move,e)}}_generateMoveOrbFunction({orb:e,inputObj:i,moveLimits:s,barRect:r,generatePriceFn:l,updateHook:a}){return function(n){let o=(t.normalizePageXY(n).pageX-r.left)/r.width;o<s.min?o=s.min:o>s.max&&(o=s.max),e.pct=o,e.elem.style.setProperty("--pct",o),i.input.value=l(o),i.elem.dataset.formattedPrice=parseInt(i.input.value),a()}}inputChangeHandler(t){const e=this.inputs[t],i="min"===t?{min:this.absoluteMin,max:this.max}:{min:this.min,max:this.absoluteMax};let s=parseInt(e.input.value)||("min"===t?this.absoluteMin:this.absoluteMax);s<i.min?s=i.min:s>i.max&&(s=i.max),this[t]=s,e.input.value=s,e.elem.dataset.formattedPrice=s,this.updateOrb(t),this.updateCallback(this.min,this.max)}mousedownHandler(t,e){const i="min"===e?"max":"min";this.orbs[i].elem.classList.remove("-last-active"),this.activeOrb=this.orbs[e],this.activeOrb.elem.classList.add("-last-active"),this.activeInput=this.inputs[e],this.orbs[e].elem.classList.add("-active"),this.inputs[e].elem.classList.add("-active");const s="min"===e?{min:0,max:this.orbs.max.pct}:{min:this.orbs.min.pct,max:1},r=this._generateMoveOrbFunction({orb:this.orbs[e],inputObj:this.inputs[e],moveLimits:s,barRect:this.barElem.getBoundingClientRect(),updateHook:this._updateHook.bind(this),generatePriceFn:this.generatePrice.bind(this)}),l=this._generateMouseupFunction(t,r);document.addEventListener(t.move,r),document.addEventListener(t.end,l,{once:!0})}mouseupHandler(){this.activeOrb&&(this.min=this.generatePrice(this.orbs.min.pct),this.max=this.generatePrice(this.orbs.max.pct),this.activeInput.elem.classList.remove("-active"),this.activeOrb.elem.classList.remove("-active"),this.activeOrb=null,this.updateCallback(this.min,this.max))}bindEvents(){window.addEventListener("load",(()=>{["min","max"].forEach((t=>{this.orbs[t].elem.addEventListener(this.EVENT_NAMES.MOUSE.start,(e=>{this.mousedownHandler(this.EVENT_NAMES.MOUSE,t)})),this.orbs[t].elem.addEventListener(this.EVENT_NAMES.TOUCH.start,(e=>{this.mousedownHandler(this.EVENT_NAMES.TOUCH,t)})),this.inputs[t].input.addEventListener("change",(e=>{this.inputChangeHandler(t)}))})),document.addEventListener(this.EVENT_NAMES.MOUSE.end,(t=>{this.mouseupHandler()})),document.addEventListener(this.EVENT_NAMES.TOUCH.end,(t=>{this.mouseupHandler()}))}))}_updateHook(){this.barElem.style.setProperty("--bar-left",[this.orbs.min.pct*this.barElem.offsetWidth,"px"].join("")),this.barElem.style.setProperty("--bar-width",this.orbs.max.pct-this.orbs.min.pct)}updateControlState(){this.updateOrb("min"),this.updateOrb("max"),this.inputs.min.input.value=this.min,this.inputs.min.elem.dataset.formattedPrice=this.min,this.inputs.max.input.value=this.max,this.inputs.max.elem.dataset.formattedPrice=this.max}updateBaseValues(t,e){if(t===e)return{error:"values are the same"};this.absoluteMin=t,this.absoluteMax=e,this.pctBasis=e-t,this.min=this.absoluteMin,this.max=this.absoluteMax,this.updateControlState()}updateOrb(t){this.orbs[t].pct=this.generatePct(this[t]),this.orbs[t].elem.style.setProperty("--pct",this.orbs[t].pct),this._updateHook()}}window.FilterAndSort=class{constructor(e,{filterKeys:i,filterFns:s,language:r,sortOptions:l,translations:a,isSearchPage:n}){this.elem=e;const o={clearfilters:"Clear filters",colorfilter:"Color",platformfilter:"Platform",pricefilter:"Price",pricerangetext:"to",hidepricing:!1,currencycharacter:"$",resultstext:"results",sortlabel:"Sort by",platformsortlabel:"Platform",lowhighsortlabel:"Price ($ - $$$)",highlowsortlabel:"Price ($$$ - $)",bikesingular:"Bike",bikeplural:"Bikes"};this.isProdcm=/cm-prod/i.test(window.location.href),a?(this.hasTranslation=!0,this.TEXT={...o,...a}):this.TEXT=o,this.isSearchPage=n,this.language=r,this.hidepricing=this.TEXT.hidepricing,this.mobileTrigger=e.querySelector(".filter-and-sort__filters-trigger"),this.mobileCloseElems=e.querySelectorAll(".filter-and-sort-js-close"),this.filtersElem=e.querySelector(".filter-and-sort__filters"),this.outputElem=e.querySelector(".filter-and-sort__products"),this.filterArea=e.querySelector(".filter-and-sort__container"),this.resultCountParent=e.querySelector(".filter-and-sort__status-and-sort"),this.resultCountElem=e.querySelector(".filter-and-sort__status__result-count"),this.resultCountTextElem=e.querySelector(".filter-and-sort__status__result-count__text"),this.clearFiltersElem=e.querySelector(".filter-and-sort-js-clear"),this.toggleFiltersDesktop=e.querySelector(".filter-and-sort__toggle-filters"),this.activeFiltersListElem=e.querySelector(".filter-and-sort__active-filters-list"),this.sortParent=e.querySelector(".filter-and-sort__sort ul"),this.sortLabel=e.querySelector(".filter-and-sort__sort-label"),!this.hidepricing&&e.querySelector(".js-price-range")&&(this.priceFilter=new t(e.querySelector(".js-price-range"),((t,e)=>{this.filterByPrice(t,e)}),{language:this.language})),this.baseSearchRules=[],this.baseProducts=[],this.priceFilteredProducts=[],this.products=[],this.filterKeys=i,this.filterFns=s||{},this.sortOptions=l,this.elem.querySelectorAll(".filter-and-sort__sort-item").length||(this.elem.querySelector(".filter-and-sort__sort").classList.add("hidden"),this.noSort=!0),this.defaultSortFn=(t,e)=>null==t&&null==e?0:null==t?1:null==e?-1:"string"!=typeof t?t-e:t.localeCompare(e),this.createMultiSortFn=(t,e)=>(i,s)=>{let r=-1,l=t.length,a=0;for(;++r<l;){const l=t[r];if(a="ascending"===e[r]?this.defaultSortFn(i[l],s[l]):this.defaultSortFn(s[l],i[l]),0!=a)return a}return a};const c={OS:"01",XS:"02",SM:"03",MD:"04",LG:"05",XL:"06"};this.sizeSortFn=(t,e)=>this.defaultSortFn(c[t]||t,c[e]||e),this.minPrice=null,this.maxPrice=null,this.currentPriceRange={min:null,max:null},this.swatchLookup={},this.filters=i.reduce(((t,e)=>{const i=document.querySelector(`.filter-and-sort__filter[data-filterkey='${e}']`);return t[e]={parentElem:i,listElem:i.querySelector("ul"),values:[]},t}),{}),i.length||(this.elem.querySelector(".filter-and-sort__filters-trigger").classList.add("hidden"),this.noFilters=!0),this.noSort&&this.noFilters&&this.resultCountParent.classList.add("hidden"),this.activeFilters={};const h=this.elem.querySelector(".filter-and-sort__sort-item.-active");h?(this.sortParent.classList.remove("-no-active-sort"),this.activeSortKey=h.dataset.sortKey,this.activeSort=h.dataset.sort,this.activeSortDirection=h.dataset.sortDirection):(this.sortParent.classList.add("-no-active-sort"),this.activeSortKey=null,this.activeSort=null,this.activeSortDirection=null),this.bindClickEvents(),window.addEventListener("scroll",(t=>{this.filterArea.getBoundingClientRect().top<200?this.resultCountParent.classList.add("-sticky-styling"):this.resultCountParent.classList.remove("-sticky-styling")})),this.filterKeys.length||this.elem.classList.add("-filters-hidden"),this.getFiltersFromURL()}_getQueryParams(t){return decodeURIComponent(t).split("&").reduce(((t,e)=>{const[i,s]=e.split("=");return t[i]=s,t}),{})}getFiltersFromURL(){try{const[t,e]=window.location.href.split("?"),i=e?this._getQueryParams(e):null;if(i){if(i.activeSortKey){const t=this.elem.querySelector(`.filter-and-sort__sort-item[data-sort-key="${i.activeSortKey}"]`);t&&(this.activeSortKey=i.activeSortKey,this.activeSort=t.dataset.sort,this.activeSortDirection=t.dataset.sortDirection,this.elem.querySelector(".filter-and-sort__sort-item.-active").classList.remove("-active"),t.classList.add("-active"))}i.filterByStock&&(this.filterByStock=!0,this.elem.querySelector(".filter-and-sort-js-stock").classList.add("-active")),i.activeFilters&&(this.activeFilters=i.activeFilters.split("|").reduce(((t,e)=>{const[i,s]=e.split("~");return t[i]=s.split("_"),t}),{})),this.hidepricing||!this.priceFilter||void 0===i.priceMin&&void 0===i.priceMax||(this.priceFilter.min=parseFloat(i.priceMin)||this.currentPriceRange.min,this.priceFilter.max=parseFloat(i.priceMax)||this.currentPriceRange.max,this.priceFilter.updateControlState(),this.filterByPrice(this.priceFilter.min,this.priceFilter.max))}}catch(t){console.warn("Could not restore filters from querystring",t)}}saveFiltersToURL(){const[t,e]=window.location.href.split("?"),i=e?this._getQueryParams(e):{},s=Object.keys(this.activeFilters);if(this.activeSortKey&&(i.activeSortKey=this.activeSortKey),this.filterByStock?i.filterByStock="true":delete i.filterByStock,!this.hidepricing&&this.priceFilter&&(i.priceMin=this.priceFilter.min,i.priceMax=this.priceFilter.max),s.length?i.activeFilters=s.map((t=>`${t}~${this.activeFilters[t].join("_")}`)).join("|"):delete i.activeFilters,Object.keys(i).length){const e=[t,Object.keys(i).map((t=>`${t}=${i[t]}`)).join("&")].join("?");window.history.replaceState({path:e},"",e)}}toggleSort(t={}){const e=!t.forceClose&&void 0;this.sortParent.style.setProperty("--mobile-height",this.sortParent.scrollHeight+"px"),this.sortLabel.classList.toggle("-active",e),this.sortParent.classList.toggle("-open",e)}bindClickEvents(){const t=this.filtersElem.querySelectorAll(".filter-and-sort__filter");0===t.length?(this.filtersElem.remove(),this.toggleFiltersDesktop.remove(),this.activeFiltersListElem.remove()):(t.forEach((t=>{t.classList.contains("-no-expandable")||window.utilities.createExpandableFilter(t),t.addEventListener("click",(e=>{const i=e.target.closest(".filter-and-sort__filter-item"),s=i?i.dataset.filterval:null;if(null!=s){const e=t.dataset.filterkey;if(this.activeFilters[e]){const t=this.activeFilters[e].indexOf(s);t>-1?(this.activeFilters[e].splice(t,1),0===this.activeFilters[e].length&&delete this.activeFilters[e]):this.activeFilters[e].push(s)}else this.activeFilters[e]=[s];this.filter()}}))})),this.activeFiltersListElem.addEventListener("click",(t=>{if(t.target.closest(".filter-and-sort-js-clear"))this.clearPriceFilter(),this.activeFilters={},this.filter();else{const e=t.target.closest(".filter-and-sort__active-filters-list__item");if(e){const t=e.dataset.filterval;if(null!=t){const i=e.dataset.filterkey,s=this.activeFilters[i].indexOf(t);this.activeFilters[i].splice(s,1),0===this.activeFilters[i].length&&delete this.activeFilters[i],this.filter()}else{if("price"===e.dataset.specialFilter)this.clearPriceFilter()}}}})),this.clearFiltersElem.addEventListener("click",(()=>{this.clearPriceFilter(),this.activeFilters={},this.filter()})),this.toggleFiltersDesktop.addEventListener("click",(()=>{this.elem.classList.toggle("-filters-hidden"),this.filtersElem.classList.toggle("-hide-filters");const t=this.toggleFiltersDesktop.querySelector(".filter-and-sort__toggle-filters__text"),e=t.dataset.toggleText,i=t.textContent;t.dataset.toggleText=i,t.textContent=e})),this.elem.querySelectorAll(".view-more-filters").forEach((t=>{t.addEventListener("click",(()=>{t.closest(".filter-and-sort__filter").classList.remove("-show-view-more")}))}))),document.addEventListener("click",(t=>{t.target.closest(".filter-and-sort__sort")||this.toggleSort({forceClose:!0})})),this.sortParent.addEventListener("click",(t=>{t.target===this.sortParent&&this.toggleSort()})),document.querySelector(".filter-and-sort__sort-label").addEventListener("click",(()=>{this.toggleSort()})),this.elem.querySelectorAll(".filter-and-sort__sort-item").forEach((t=>{t.addEventListener("click",(()=>{if(this.sortParent.classList.contains("-open")){const e=this.elem.querySelector(".filter-and-sort__sort-item.-active");e&&e.classList.remove("-active"),this.sortParent.classList.remove("-no-active-sort"),t.classList.add("-active"),this.activeSortKey=t.dataset.sortKey,this.activeSort=t.dataset.sort,this.activeSortDirection=t.dataset.sortDirection,"featured"===this.activeSort?this.filter():this.sort()}this.toggleSort()}))})),this.mobileTrigger.onclick=()=>{this.filtersElem.classList.add("-open"),this.preserveScrollPosition=document.documentElement.scrollTop,this.resultCountParent.style.position="fixed",document.documentElement.classList.add("noscroll"),document.body.classList.add("noscroll")},this.mobileCloseElems.forEach((t=>{t.onclick=()=>{this.filtersElem.classList.remove("-open"),document.documentElement.classList.remove("noscroll"),document.body.classList.remove("noscroll"),this.resultCountParent.style.removeProperty("position"),document.documentElement.scrollTo(0,this.preserveScrollPosition)}}))}getFilteredProducts(t){window.PREFILTER_INSTOCK&&(t.instockfilter=[this.TEXT.instockonline]);const e=Object.keys(t);if(0===e.length)return this.priceFilteredProducts;const i=e.map((t=>{const e=this.activeFilters[t];return{key:t,values:e,len:e.length}}));return this.priceFilteredProducts.reduce(((t,e)=>{let s=e.variants.filter((t=>{let s=i.length;for(;--s>-1;){let r=i[s],l=t[r.key]||e[r.key],a=r.len,n=r.values,o=!1;if(null==l)return!1;if("object"==typeof l){for(;--a>-1;)if(l.indexOf(n[a])>-1){o=!0;break}}else for(;--a>-1;)if(l==n[a]){o=!0;break}if(!o)return!1}return!0}));if(s.length>0){const i=JSON.parse(JSON.stringify(e));i.variants=s,t.push(i)}return t}),[])}filter(){this.products=this.getFilteredProducts(this.activeFilters),this.sort(),this.renderFilters(),this.scrollToResults()}filterByPrice(t,e){this.hidepricing||!this.priceFilter||null==t||null==e||t===this.currentPriceRange.min&&e===this.currentPriceRange.max?(this.priceFilteredProducts=this.baseProducts,this.isFilteredByPrice=!1):(this.priceFilteredProducts=this.baseProducts.filter((i=>i.finalprice>=t&&i.finalprice<=e)),this.isFilteredByPrice=!0),this.filter()}clearPriceFilter(){!this.hidepricing&&this.priceFilter&&(this.priceFilter.updateBaseValues(this.currentPriceRange.min,this.currentPriceRange.max),this.filterByPrice(this.currentPriceRange.min,this.currentPriceRange.max))}sort(){const t=this.activeSort?this.activeSort:this.hidepricing?"title":"finalprice",e=this.sortOptions[t]||{},i=this.activeSortDirection?this.activeSortDirection:this.hidepricing?"ascending":"descending";t.indexOf("|")>-1?(e.type="multisort",e.fn=this.createMultiSortFn(t.split("|"),i.split("|"))):e.fn||(e.fn=this.defaultSortFn);let s,r,l=[];switch(e.type){case"grouped":l=e.fn(this.products,i),s=l.reduce(((t,e)=>t+e.products.length),0);break;case"multisort":r=this.products.sort(((t,i)=>e.fn(t,i))),l=[{products:r}],s=r.length;break;default:r=this.products.sort(((s,r)=>"ascending"===i?e.fn(s[t],r[t]):e.fn(r[t],s[t]))),l=[{products:r}],s=r.length}this.saveFiltersToURL(),this.render(l,s)}renderProduct(t){return window.renderProductCard(t,{hidepricing:this.hidepricing,additionalClass:"filter-and-sort__product"})}render(t,e){this.resultCountTextElem.textContent=e,this.resultCountElem.dataset.state=1===e?"singular":"plural",this.outputElem.innerHTML=t.map((t=>`\n          <div class="filter-and-sort__products-group">\n            ${t.info?`\n              <div class="filter-and-sort__products-group__info">\n                <h3 class="filter-and-sort__products-group__info-title">\n                  <a href="${t.info.url}">${t.info.title}</a>\n                  <span class="filter-and-sort__products-group__info-result-count">${t.products.length} ${1===t.products.length?this.TEXT.bikesingular:this.TEXT.bikeplural}</span>\n                </h3>\n                <p class="filter-and-sort__products-group__info-description">${t.info.text}</p>\n              </div>\n            `:""}\n            <div class="filter-and-sort__products-group__products">\n              ${t.products.map((t=>this.renderProduct(t))).join("")}\n            </div>\n          </div>`)).join(""),this.outputElem.querySelectorAll("img").forEach((t=>{t.onload=function(){t.style.opacity=1}})),this.gaSelectItemHandler&&this.outputElem.querySelectorAll(".product-card__link").forEach((t=>{t.addEventListener("click",(e=>{this.gaSelectItemHandler(e,t)}))}))}_renderFilterLineItem(t,e,i){if("colors"===t){return`<li class="filter-and-sort__filter-item filter-and-sort__filter-item__color" data-filterval="${e}"><span class="filter-and-sort__filter-item__color-swatch color swatch-${this.swatchLookup[e]}" style="background-color: ${e}; --swatch-color: ${e}; ${"White"===e?"border: 1px solid black;":"border: 1px solid transparent;"}"></span><span class="colorname">${e}</span> <span>(${i})</span></li>`}return`<li class="filter-and-sort__filter-item filter-and-sort__filter-item__default" data-filterval="${e}">${e} (${i})</li>`}_renderFilterGroupBasedOnProductSet(t,e){const i=this.filters[t],s="size"===t?this.sizeSortFn:this.defaultSortFn;let r;r=i.isArray?i.values.sort(s).reduce(((i,s)=>{let r=0;return e.forEach((e=>{e.variants.some((i=>{const r=i[t]||e[t];return r&&r.indexOf(s)>-1}))&&++r})),r>0&&i.push(this._renderFilterLineItem(t,s,r)),i}),[]):i.values.sort(s).reduce(((i,s)=>{let r=0;return e.forEach((e=>{e.variants.some((i=>(i[t]||e[t])===s))&&++r})),r>0&&i.push(this._renderFilterLineItem(t,s,r)),i}),[]),r.length>6?i.parentElem.classList.add("-has-overflow"):i.parentElem.classList.remove("-has-overflow"),r.length?(i.parentElem.classList.remove("hidden"),i.listElem.innerHTML=r.join("")):(i.parentElem.classList.add("hidden"),i.listElem.innerHTML="")}renderFilters(){if(Object.keys(this.activeFilters).length>0){this.filterKeys.forEach((t=>{const e=JSON.parse(JSON.stringify(this.activeFilters));delete e[t];const i=this.getFilteredProducts(e);this._renderFilterGroupBasedOnProductSet(t,i)}));const t=Object.keys(this.activeFilters).reduce(((t,e)=>(this.activeFilters[e].forEach((i=>{if(window.PREFILTER_INSTOCK&&i===this.TEXT.instockonline)return;const s=this.filtersElem.querySelector(`.filter-and-sort__filter[data-filterkey="${e}"] .filter-and-sort__filter-item[data-filterval="${i}"]`);s&&s.classList.add("-active"),t.push(`<li class="filter-and-sort__active-filters-list__item" data-filterkey="${e}" data-filterval="${i}"><span>${i.trim()}</span></li>`)})),t)),[]);if(this.isFilteredByPrice){const e=`<li class="filter-and-sort__active-filters-list__item" data-special-filter="price"><span>${this.TEXT.currencycharacter}${this.priceFilter.min} - ${this.TEXT.currencycharacter}${this.priceFilter.max}</span></li>`;t.push(e)}t.length>0&&t.push(`<li class="filter-and-sort__clear-filters filter-and-sort-js-clear">${this.TEXT.clearfilters}</li>`),this.activeFiltersListElem.innerHTML=t.join("")}else this.filterKeys.forEach((t=>{this._renderFilterGroupBasedOnProductSet(t,this.products)})),this.isFilteredByPrice?this.activeFiltersListElem.innerHTML=`<li class="filter-and-sort__active-filters-list__item" data-special-filter="price"><span>${this.TEXT.currencycharacter}${this.priceFilter.min} - ${this.TEXT.currencycharacter}${this.priceFilter.max}</span></li>\n          <li class="filter-and-sort__clear-filters filter-and-sort-js-clear">${this.TEXT.clearfilters}</li>`:this.activeFiltersListElem.innerHTML=""}toggleVisibility(t){switch(t){case"show":this.elem.classList.remove("hidden");break;case"hide":this.elem.classList.add("hidden");break;default:this.elem.classList.toggle("hidden")}}prepareProductData(t){if(!t||!t.length)return[];this.minPrice=t[0].finalprice,this.maxPrice=t[0].finalprice;const e=t.reduce(((t,e)=>((this.isProdcm||void 0!==e.swatchesandimages)&&(e.finalprice<this.minPrice?this.minPrice=e.finalprice:e.finalprice>this.maxPrice&&(this.maxPrice=e.finalprice),e.variants.forEach((t=>{this.filterKeys.forEach((i=>{const s=t[i]||e[i];"object"==typeof s?s.forEach((t=>{null!=t&&-1===this.filters[i].values.indexOf(t)&&this.filters[i].values.push(t)})):null!=s&&-1===this.filters[i].values.indexOf(s)&&this.filters[i].values.push(s)}))})),t.push(e)),t)),[]);return this.filterKeys.forEach((t=>{let i=e.length;for(;--i>-1;){let s=typeof e[i][t];if("undefined"!==s){this.filters[t].isArray="object"===s;break}}})),this.currentPriceRange.min=Math.floor(this.minPrice),this.currentPriceRange.max=Math.ceil(this.maxPrice),e}scrollToResults(){if(this.initialUpdateFired){const t=this.isSearchPage?0:this.elem.offsetTop;window.scrollTo(0,t)}}updateProducts({doReset:t,products:e,baseSearchRules:i,showResultsLink:s,gaSelectItemHandler:r}){this.baseSearchRules=i;const l=this.prepareProductData(e);if(this.baseProducts=l,this.priceFilteredProducts=this.baseProducts,this.products=l,r&&(this.gaSelectItemHandler=r),t)this.elem.dataset.state="initial";else if(0===e.length)this.elem.dataset.state="no results";else{this.elem.dataset.state="has results";const t=!s||s.error?"":s.url;document.getElementById("bikefinder_results_link")&&(document.getElementById("bikefinder_results_link").value=t),this.renderFilters(),!this.hidepricing&&this.priceFilter&&this.priceFilter.updateBaseValues(this.currentPriceRange.min,this.currentPriceRange.max),this.ranForFirstTime?this.activeFilters={}:(this.ranForFirstTime=!0,this.getFiltersFromURL()),this.filter()}return this.scrollToResults(),this.initialUpdateFired||(this.initialUpdateFired=!0),this.elem.dataset.state}}}();