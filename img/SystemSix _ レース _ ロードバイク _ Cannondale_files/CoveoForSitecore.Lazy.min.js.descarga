!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("coveo-search-ui")):"function"==typeof define&&define.amd?define(["coveo-search-ui"],t):"object"==typeof exports?exports.CoveoForSitecore=t(require("coveo-search-ui")):e.CoveoForSitecore=t(e.Coveo)}(window,function(e){return function(e){function t(t){for(var n,i,o=t[0],a=t[1],c=0,l=[];c<o.length;c++)i=o[c],r[i]&&l.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(s&&s(t);l.length;)l.shift()()}var n={},r={1:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=o);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+({2:"CoveoForSitecoreAnalytics",3:"CoveoForSitecoreBindWithUserContext",4:"CoveoForSitecoreConfigureSearchHub",5:"CoveoForSitecoreExpressions",6:"CoveoForSitecoreExternalContent",7:"CoveoForSitecoreFilterExpression",8:"CoveoForSitecoreLocalExpression",9:"CoveoForSitecoreRankingExpression",10:"CoveoForSitecoreSyntax",11:"GoogleApiPositionProvider",12:"NavigatorPositionProvider",13:"SendAnalyticsToSitecore",14:"StaticPositionProvider",15:"ValidateAnalyticsIncluded"}[e]||e)+".min.js"}(e),a=function(t){c.onerror=c.onload=null,clearTimeout(s);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+i+": "+o+")");a.type=i,a.request=o,n[1](a)}r[e]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:c})},12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.webpackJsonpCoveoForSitecore=window.webpackJsonpCoveoForSitecore||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var s=a;return i(i.s=65)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.onSitecoreContextInitialization="onSitecoreContextInitialization",e}();t.SitecoreContextEvents=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=n(6),o=n(0),a=function(){function e(){}return e.configureContext=function(e){if(null==e)throw Error("You must execute `configureContext` with an HTML element.");var t=o.ComponentOptions.initComponentOptions(e,i.CoveoForSitecoreContext);this.initializeWithContextOptions(e,t)},e.initializeWithContextOptions=function(e,t){var n=new r.ContextInitializer,i=n.createFieldsHandler({externalFields:t.scExternalFields,sourceSpecificFields:t.scSourceSpecificFields,preferSourceSpecificFields:t.scPreferSourceSpecificFields,prefix:t.scFieldPrefix,suffix:t.scFieldSuffix}),o=n.createLabelsHandler({labels:t.scLabels}),a=t.scIndexSourceName;n.initializePrebinding({fieldsHandler:i,context:t}),n.initializeUnderscoreFieldsHelpers(i),n.initializeUnderscoreLabelsHelpers(o),n.initializeUnderscoreContextHelpers(a),n.initializeContextElement(e),this.fields=i,this.labels=o,this.element=e},e}();t.Context=a},function(e,t,n){"use strict";function r(e){e.removeAttribute("id");for(var t=e.querySelectorAll("*[id]"),n=t.length,r=0;r<n;r++)t.item(r).removeAttribute("id");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.nodeListToArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e.item(n));return t},t.cloneElementSafelyForAccessibility=function(e){return r(e.cloneNode(!0))},t.removeAllIDAttributes=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=n(36),o=function(){function e(){}return e.registerPrebindHelper=function(e,t){this.processor.registerPrebindHelper(e,t)},e.getHelper=function(e){return this.processor.getHelper(e)},e.applyPrebindingOnElement=function(e){this.processor.canApplyPrebind(e)&&this.processor.hasNotAppliedPrebind(e)&&this.processor.applyToElement(e)},e.applyPreprocessingToElements=function(e){return i.adjustDOMElements(e),e.querySelectorAll("*")},e.applyPrebindingOnChildren=function(e){var t=this,n=this.applyPreprocessingToElements(e);this.nodeListToArray(n).map(function(e){return e}).filter(function(e){return t.processor.canApplyPrebind(e)}).filter(function(e){return t.processor.hasNotAppliedPrebind(e)}).forEach(function(e){return t.processor.applyToElement(e)})},e.nodeListToArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},e.processor=new r.PrebindResolver,e}();t.Prebinding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.onBuildingSitecoreExternalContent="onBuildingSitecoreExternalContent",e.onBuildingLocalSitecoreInstanceExpression="onBuildingLocalSitecoreInstanceExpression",e}();t.SitecoreExpressionEvents=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),c=function(e){function t(n,r,i){var a=e.call(this,n,t.ID,i)||this;return a.element=n,a.options=r,a.bindings=i,a.options=o.ComponentOptions.initComponentOptions(n,t,r),a.bind.onRootElement(o.InitializationEvents.afterComponentsInitialization,a.afterComponentsInitialization),a.bind.onRootElement(o.QueryEvents.doneBuildingQuery,a.doneBuildingQuery),a.bind.onRootElement(o.OmniboxEvents.buildingQuerySuggest,a.buildingQuerySuggest),a}return i(t,e),t.prototype.doneBuildingQuery=function(e){this.hasDefaultPipelineNameSet()&&this.queryBuilderUsesDefaultPipeline(e.queryBuilder)&&(e.queryBuilder.pipeline=this.options.scDefaultPipelineName)},t.prototype.buildingQuerySuggest=function(e){this.hasDefaultPipelineNameSet()&&this.querySuggestUsesDefaultPipeline(e.payload)&&(e.payload.pipeline=this.options.scDefaultPipelineName)},t.prototype.hasDefaultPipelineNameSet=function(){return""!==this.options.scDefaultPipelineName},t.prototype.queryBuilderUsesDefaultPipeline=function(e){return void 0===e.pipeline},t.prototype.querySuggestUsesDefaultPipeline=function(e){return void 0===e.pipeline},t.prototype.afterComponentsInitialization=function(){var e={sitecoreItemId:this.options.scItemId,sitecoreItemUri:this.options.scItemUri,sitecorePageName:this.options.scPageName,shouldHaveAnalyticsComponent:this.options.scShouldHaveAnalyticsComponent,analyticsEnabled:this.options.scAnalyticsEnabled,indexSourceName:this.options.scIndexSourceName,currentLanguage:this.options.scCurrentLanguage,languageFieldName:this.options.scLanguageFieldName,latestVersionFieldName:this.options.scLatestVersionFieldName,isInExperienceEditor:this.options.scIsInExperienceEditor,sitecorePageFullPath:this.options.scPageNameFullPath,siteName:this.options.scSiteName,restEndpointUri:this.options.scRestEndpointUri};this.bind.trigger(this.element,a.SitecoreContextEvents.onSitecoreContextInitialization,e)},t.ID="ForSitecoreContext",t.options={scItemId:o.ComponentOptions.buildStringOption(),scItemUri:o.ComponentOptions.buildStringOption(),scLanguageFieldName:o.ComponentOptions.buildStringOption(),scLatestVersionFieldName:o.ComponentOptions.buildStringOption(),scCurrentLanguage:o.ComponentOptions.buildStringOption(),scRestEndpointUri:o.ComponentOptions.buildStringOption(),scLabels:o.ComponentOptions.buildJsonOption(),scPageName:o.ComponentOptions.buildStringOption(),scDefaultPipelineName:o.ComponentOptions.buildStringOption(),scShouldHaveAnalyticsComponent:o.ComponentOptions.buildBooleanOption(),scAnalyticsEnabled:o.ComponentOptions.buildBooleanOption(),scIsUserAnonymous:o.ComponentOptions.buildBooleanOption(),scFieldPrefix:o.ComponentOptions.buildStringOption(),scFieldSuffix:o.ComponentOptions.buildStringOption(),scExternalFields:o.ComponentOptions.buildJsonOption(),scSourceSpecificFields:o.ComponentOptions.buildJsonOption(),scPreferSourceSpecificFields:o.ComponentOptions.buildBooleanOption(),scIndexSourceName:o.ComponentOptions.buildStringOption(),scIsInExperienceEditor:o.ComponentOptions.buildBooleanOption(),scMaximumAge:o.ComponentOptions.buildNumberOption(),scPageNameFullPath:o.ComponentOptions.buildStringOption(),scSiteName:o.ComponentOptions.buildStringOption()},t}(o.Component);t.CoveoForSitecoreContext=c,o.Initialization.registerAutoCreateComponent(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.externalFields=this.parseExternalFields(e)}return e.prototype.parseExternalFields=function(e){var t=this;return e.map(function(e){return"string"==typeof e?{fieldName:e.toLowerCase(),shouldEscape:!1}:t.isExternalFieldConfig(e)?{fieldName:e.fieldName.toLowerCase(),shouldEscape:e.shouldEscape}:void console.error("Invalid external field '"+e+"'.")})},e.prototype.shouldEscapeFirstCharacter=function(e){return!1},e.prototype.shouldEscapeSpecialCharacters=function(e){var t=this.externalFields.filter(function(t){return t.fieldName.toLowerCase()===e.toLowerCase()});return!(t.length>0)||t[0].shouldEscape},e.prototype.shouldDecorate=function(e){return!this.externalFields.some(function(t){return t.fieldName.toLowerCase()===e.toLowerCase()})},e.prototype.isExternalField=function(e){return this.externalFields.some(function(t){return t.fieldName.toLowerCase()===e.toLowerCase()})},e.prototype.isExternalFieldConfig=function(e){return void 0!==e&&void 0!==e.fieldName&&void 0!==e.shouldEscape},e}();t.LegacyFieldTypeResolver=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="itemIdSelector",this.resolvers=[new o,new i,new a]}return e.prototype.getPrebind=function(e){var t=this;return function(e,n){return t.getFirstValidResolver(e,n).getValue(e,n)}},e.prototype.getFirstValidResolver=function(e,t){var n;do{if(0===this.resolvers.length){var r="Could not resolve the element using the current resolver. Ensure that a valid value is set.";throw console.error(r,{itemId:e,element:t}),r}n=this.resolvers.shift()}while(!n.canResolve(e,t));return n},e}();t.ItemIdSelectorPrebind=r;var i=function(){function e(){}return e.prototype.canResolve=function(e){return this.isItemDefined(e)&&this.isIdSelectorValid("#"+e)},e.prototype.getValue=function(e){return"#"+e},e.prototype.isItemDefined=function(e){return!!e},e.prototype.isIdSelectorValid=function(e){return null!==document.querySelector(e)},e}();t.ResolveIfItemIdInPage=i;var o=function(){function e(){}return e.prototype.canResolve=function(e,t){return!!e&&this.isStartingWithSelectorCharacter(e)},e.prototype.getValue=function(e,t){return e},e.prototype.isStartingWithSelectorCharacter=function(e){var t=e[0];return-1!==[".","#"].indexOf(t)},e}();t.ResolveIfSelector=o;var a=function(){function e(){}return e.prototype.canResolve=function(e,t){return!0},e.prototype.getValue=function(e,t){return e},e}();t.UseItemIdSelectorAsIs=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(50),o=n(51),a=n(13),c=n(52);function s(e){return t.searchInterfaceInitializer.initSearchInterface(e)}function l(e){t.externalComponentInitializer.initializeExternalComponentSection(e)}t.searchInterfaceInitializer=new o.SearchInterfaceInitializer,t.searchboxInitializer=new i.SearchboxInitializer,t.externalComponentInitializer=new r.ExternalComponentInitializer,t.hostedSearchPageInitializer=new c.HostedSearchPageInitializer,t.initSearchInterface=s,t.initializeSearchInterfaceForExperienceEditor=function(e){return t.searchInterfaceInitializer.initializeExperienceEditorHooksForSearchInterface(e),s(e)},t.initSearchboxIfStandalone=function(e,n,r){return t.searchboxInitializer.initSearchboxIfStandalone(e,n,r)},t.initContextOnElement=function(e){a.ElementWithContextInitializer.initializeContextWithinElement(e)},t.initExternalComponentsSection=l,t.initExternalComponentsSectionForExperienceEditor=function(e){t.externalComponentInitializer.initializeExperienceEditorHooksForExternalComponentsSection(e),l(e)},t.initHostedSearchPageInitializer=function(e){t.hostedSearchPageInitializer.initializeSearchPage(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(3),o=n(0),a=function(){function e(){}return e.prototype.loadComponentsForSearchInterface=function(e,t){var n=this;return r.Prebinding.applyPrebindingOnElement(t),r.Prebinding.applyPrebindingOnChildren(t),o.Initialization.automaticallyCreateComponentsInside(t,{bindings:e.getBindings(),options:{}}).initResult.then(function(){n.removeAllPlaceholdersWithinElement(t),e.queryController.executeQuery({ignoreWarningSearchEvent:!0})})},e.prototype.tryUnloadComponentsForSearchInterface=function(e,t){var n=this;i.nodeListToArray(t.getElementsByClassName("CoveoFacet")).forEach(function(t){var r=o.get(t,"CoveoFacet");r&&e.detachComponent("Facet",r),n.removeAllChildren(t)}),i.nodeListToArray(t.getElementsByClassName("CoveoTab")).forEach(function(t){var r=o.get(t,"CoveoTab");r&&e.detachComponent("Tab",r),n.removeAllChildren(t)})},e.prototype.removeAllPlaceholdersWithinElement=function(e){var t=this;i.nodeListToArray(e.getElementsByClassName("coveo-during-initialization")).forEach(function(e){return t.removePlaceholders(e)})},e.prototype.removePlaceholders=function(e){e.classList.remove("coveo-during-initialization"),e.classList.contains("CoveoFacet")&&this.removeFacetsPlaceholders(e)},e.prototype.removeFacetsPlaceholders=function(e){e.classList.remove("coveo-with-placeholder"),this.removeAllChildren(e)},e.prototype.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},e.prototype.loadComponentsWithSearchInterfaceInitialization=function(e,t){r.Prebinding.applyPrebindingOnElement(t),r.Prebinding.applyPrebindingOnChildren(t),Coveo.options(e,{externalComponents:[t]})},e}();t.SearchInterfaceComponentInitializer=a;var c=new a;t.getInitializerInstance=function(){return c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=function(){function e(){this.isAfterFrameLoadedOverriden=!1,this.isAfterPersonalizationChangedOverriden=!1,this.isBeforeUnloadingChromeOverriden=!1,this.onAfterFrameLoadedCallbacks=[],this.onAfterPersonalizationChanged=[],this.onBeforeUnloadingChrome=[]}return e.prototype.registerOnLoadRenderingFromUrl=function(e){this.tryOverrideSitecoreLoadRenderingFromUrl(),this.onAfterFrameLoadedCallbacks.push(e)},e.prototype.registerBeforeUnloadingChrome=function(e){this.tryOverrideOnUnloadingChrome(),this.onBeforeUnloadingChrome.push(e)},e.prototype.registerOnAfterPersonalizationChanged=function(e){this.tryOverrideSitecoreChromeTypesRenderingChangeCondition(),this.onAfterPersonalizationChanged.push(e)},e.prototype.isInBackgroundRendering=function(){return-1!==window.location.search.indexOf(e.isInBackgroundRenderingParameterName)},e.prototype.getComponentFromLoadRenderingFromUrlCallbackData=function(e){return document.getElementById(e.opening[0].id).nextElementSibling},e.prototype.tryOverrideSitecoreLoadRenderingFromUrl=function(){this.isAfterFrameLoadedOverriden||"undefined"==typeof Sitecore||this.overrideSitecoreLoadRenderingFromUrl()},e.prototype.overrideSitecoreLoadRenderingFromUrl=function(){var e=this,t=Sitecore.PageModes.ChromeTypes.Placeholder.prototype.insertRendering;Sitecore.PageModes.ChromeTypes.Placeholder.prototype.insertRendering=function(n){var r;t.call(this,n),r=n,e.onAfterFrameLoadedCallbacks.forEach(function(e){return e(r)})},this.isAfterFrameLoadedOverriden=!0},e.prototype.tryOverrideOnUnloadingChrome=function(){this.isBeforeUnloadingChromeOverriden||"undefined"==typeof Sitecore||(this.overrideSitecoreChromeChangeCondition(),this.isBeforeUnloadingChromeOverriden=!0)},e.prototype.overrideSitecoreChromeChangeCondition=function(){var e=this,t=Sitecore.PageModes.ChromeTypes.Rendering.prototype.changeCondition;Sitecore.PageModes.ChromeTypes.Rendering.prototype.changeCondition=function(n,r,i){var o;o=this.chrome.element[0],e.onBeforeUnloadingChrome.forEach(function(e){return e(o)}),t.apply(this,arguments)}},e.prototype.tryOverrideSitecoreChromeTypesRenderingChangeCondition=function(){this.isAfterPersonalizationChangedOverriden||"undefined"==typeof Sitecore||this.overrideSitecoreChromeTypesRenderingChangeCondition()},e.prototype.overrideSitecoreChromeTypesRenderingChangeCondition=function(){var e,t=this,n=Sitecore.PageModes.ChromeTypes.Rendering.prototype._startActivation,r=Sitecore.PageModes.ChromeTypes.Rendering.prototype._endActivation;Sitecore.PageModes.ChromeTypes.Rendering.prototype._startActivation=function(r,i){e=function(e){return t.isDifferentFirstLoadMarker(e)?e[2]:e[1]}(r),n.apply(this,arguments)},Sitecore.PageModes.ChromeTypes.Rendering.prototype._endActivation=function(n){var i;r.apply(this,arguments),e&&(i=e,t.onAfterPersonalizationChanged.forEach(function(e){return e(i)}))},this.isAfterPersonalizationChangedOverriden=!0},e.prototype.isDifferentFirstLoadMarker=function(e){return e[1].nodeType===Node.TEXT_NODE},e.prototype.registerShowDebugInformationCallback=function(){window.scCoveoShowDebugInformation||(window.scCoveoShowDebugInformation=function(e){var t=r.nodeListToArray(document.getElementsByClassName("coveo-debug-information"));e?t.forEach(function(e){return e.classList.remove("coveo-debug-hidden")}):t.forEach(function(e){return e.classList.add("coveo-debug-hidden")}),Sitecore.PageModes.ChromeManager.resetChromes()})},e.isInBackgroundRenderingParameterName="sc_phk",e}();t.SitecoreExperienceEditor=i;var o=new i;t.getExperienceEditorInstance=function(){return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3),o=function(){function e(){}return e.prototype.getSearchInterfacesInPage=function(e){var t=this.getSearchInterfacesSelectorFromComponentIds(e),n=document.querySelectorAll(t);return i.nodeListToArray(n)},e.prototype.getSearchInterfacesSelectorFromComponentIds=function(e){return e.map(function(e){return r.Component.computeSelectorForType(e)}).join(", ")},e}();t.SearchInterfacesProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(2),o=n(3),a=function(){function e(){}return e.initializeContextWithinElement=function(e){i.Context.element&&e.appendChild(o.cloneElementSafelyForAccessibility(i.Context.element)),r.Prebinding.applyPrebindingOnElement(e),r.Prebinding.applyPrebindingOnChildren(e)},e}();t.ElementWithContextInitializer=a},,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.SitecoreContextEvents=r.SitecoreContextEvents;var i=n(5);t.SitecoreExpressionEvents=i.SitecoreExpressionEvents},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.Context=r.Context;var i=n(4);t.Prebinding=i.Prebinding;var o=n(48);t.SearchEndpoint=o.SearchEndpoint},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),i=n(33),o=n(34),a=n(4),c=n(37),s=n(0),l=n(7),u=function(){function e(){}return e.prototype.createFieldsHandler=function(e){var t=e.externalFields||[],n=e.sourceSpecificFields||[],o=e.preferSourceSpecificFields?new l.LegacyFieldTypeResolver(t):new i.SourceSpecificFieldResolver(n,t);return new r.CoveoFieldsHandler(o,e.prefix,e.suffix)},e.prototype.createLabelsHandler=function(e){var t=e.labels||{};return new o.CoveoLabelsHandler(t)},e.prototype.initializePrebinding=function(e){c.PrebindHelpers.getAllPrebindHelpers().forEach(function(t){a.Prebinding.registerPrebindHelper(t.name,t.getPrebind(e))})},e.prototype.initializeUnderscoreFieldsHelpers=function(e){s.TemplateHelpers.registerTemplateHelper("coveoFieldValue",function(t){return this.raw[e.toCoveo(t)]}),s.TemplateHelpers.registerTemplateHelper("coveoFieldName",function(t){return e.toCoveo(t)})},e.prototype.initializeUnderscoreLabelsHelpers=function(e){s.TemplateHelpers.registerTemplateHelper("translateLabel",function(t){return e.translate(t)})},e.prototype.initializeUnderscoreContextHelpers=function(e){s.TemplateHelpers.registerTemplateHelper("currentSourceName",function(){return e})},e.prototype.initializeContextElement=function(e){a.Prebinding.applyPrebindingOnElement(e)},e}();t.ContextInitializer=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=function(){function e(e,t,n){this.prefix=t,this.suffix=n,void 0!==e.shouldDecorate?this.resolver=e:this.resolver=new r.LegacyFieldTypeResolver(e)}return e.prototype.toCoveo=function(t){if(this.isValidFieldName(t)){var n=t.toLowerCase(),r=this.stripCoveoFieldDelimiter(n);e.escapedCharacterRegex.test(r)&&(console.warn("Field name "+t+" contains the z\\d{2,3}x pattern. Ensure you avoid using this pattern in field names."),console.trace());var i=this.translateFieldName(r);return this.startsWithAt(t)?this.addCoveoFieldDelimiter(i):i}return console.error("Could not translate the '"+t+"' field to a Coveo field. Returning as is."),t},e.prototype.addCoveoFieldDelimiter=function(t){var n=t;return this.startsWithAt(t)||(n=(""+e.coveoFieldDelimiter+t).toLowerCase()),n},e.prototype.isCoveoFieldName=function(e){var t=this.stripCoveoFieldDelimiter(e);return this.resolver.isExternalField(t)||this.isDecorated(t)},e.prototype.isDecorated=function(e){var t=this.prefix+"[\\w]+"+this.suffix;return new RegExp(t).test(e)},e.prototype.isValidFieldName=function(e){return void 0!==e&&""!==e},e.prototype.startsWithAt=function(t){return t[0]===e.coveoFieldDelimiter},e.prototype.stripCoveoFieldDelimiter=function(e){var t=e;return this.startsWithAt(e)&&(t=t.substr(1)),t},e.prototype.translateFieldName=function(e){var t=e;return this.resolver.shouldEscapeSpecialCharacters(e)&&!this.isFieldAlreadyTranslated(e)&&(t=this.replaceSpecialCharacters(t)),this.resolver.shouldDecorate(e)&&(t=this.prefix+t+this.suffix),this.resolver.shouldEscapeFirstCharacter(t)&&(t=this.replaceFirstCharacter(t)),t},e.prototype.isFieldAlreadyTranslated=function(t){return e.fieldNameRegex.test(t)&&e.escapedCharacterRegex.test(t)},e.prototype.replaceFirstCharacter=function(e){var t=e.split(""),n=t.shift();return t.unshift(this.escapeSpecialCharacter(n)),t.join("")},e.prototype.replaceSpecialCharacters=function(e){return e.split("").map(this.replaceSpecialCharacter.bind(this)).join("")},e.prototype.replaceSpecialCharacter=function(t){return t.match(e.nonSpecialCharacters)?t:this.escapeSpecialCharacter(t)},e.prototype.escapeSpecialCharacter=function(e){return"z"+e.charCodeAt(0)+"x"},e.nonSpecialCharactersString="[a-wyA-WY0-9]",e.nonSpecialCharacters=new RegExp(e.nonSpecialCharactersString),e.coveoFieldDelimiter="@",e.fieldNameRegex=new RegExp("^[^\\W_]*$"),e.escapedCharacterRegex=new RegExp("z\\d{2,3}x"),e}();t.CoveoFieldsHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.sourceSpecificFields=e,this.externalFields=t}return e.prototype.shouldEscapeFirstCharacter=function(t){return!t[0].match(e.validFirstCharacters)},e.prototype.shouldEscapeSpecialCharacters=function(e){return!this.externalFields.some(function(t){return t.fieldName.toLowerCase()===e.toLowerCase()})},e.prototype.shouldDecorate=function(e){return this.sourceSpecificFields.some(function(t){return t.fieldName.toLowerCase()===e.toLowerCase()})},e.prototype.isExternalField=function(e){return this.externalFields.some(function(t){return t.fieldName.toLowerCase()===e.toLowerCase()})},e.validFirstCharacters=new RegExp("[a-zA-Z_]"),e}();t.SourceSpecificFieldResolver=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.labels=e}return e.prototype.translate=function(e){return this.labels[e]||e},e}();t.CoveoLabelsHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.prebindAppliedValue="appliedPrebind",this.helpers={}}return e.prototype.registerPrebindHelper=function(e,t){if("string"!=typeof e||""===e)throw"You must define a name for the prebind helper.";if(null==t)throw"You must define a handler for the prebind helper.";this.helpers.hasOwnProperty(e)?console.warn("A prebind handler already exists for '"+e+"'. It will be ignored"):this.helpers[e]=t},e.prototype.hasHelper=function(e){return this.helpers.hasOwnProperty(e)},e.prototype.getHelper=function(e){if(!this.hasHelper(e))throw"'"+e+"' has no registered helper.";return this.helpers[e]},e.prototype.canApplyPrebind=function(e){return!!e.dataset},e.prototype.hasNotAppliedPrebind=function(e){return"true"!==e.dataset[this.prebindAppliedValue]},e.prototype.applyToElement=function(e){var t=this;try{var n=this.getPrebindingAttributesForElement(e);n.length>0&&(e.dataset[this.prebindAppliedValue]="true"),n.forEach(function(n){return t.applyPrebindToElement(n,e)})}catch(t){console.warn("(CoveoForSitecore) prebinding failed on element.",e,t)}},e.prototype.getPrebindingAttributesForElement=function(e){var t=this;return this.getAllPrebindingAttributesNames(e).map(function(n){var r=e.dataset[n],i=t.lowerCaseFirstCharacter(t.removePrebindPrefix(n));return{attribute:i,attributeValue:e.dataset[i]||"",method:t.getHelper(r)}})},e.prototype.getAllPrebindingAttributesNames=function(e){var t=this;return Object.keys(e.dataset).filter(function(e){return t.stringStartsWithPrebindingString(e)}).filter(function(n){var r=e.dataset[n];return t.filterAndWarnNonExistingHelperName(r,e)})},e.prototype.stringStartsWithPrebindingString=function(t){return 0===t.lastIndexOf(e.prebindString)},e.prototype.filterAndWarnNonExistingHelperName=function(e,t){var n=this.hasHelper(e);return n||console.warn("(CoveoForSitecore) an unregistered prebinding '"+e+"' was set on the element. Register this method using Prebinding.registerPrebindHelper(\""+e+'", handler).',t),n},e.prototype.removePrebindPrefix=function(t){return t.substring(e.prebindString.length)},e.prototype.lowerCaseFirstCharacter=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},e.prototype.applyPrebindToElement=function(e,t){t.dataset[e.attribute]=e.method(e.attributeValue,t)},e.prebindString="prebind",e}();t.PrebindResolver=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){var t=e.cloneNode(!1),n=JSON.parse(t.dataset.sortCriteria);return n.direction="Descending"===n.direction?"Ascending":"Descending",t.dataset.sortCriteria=JSON.stringify(n),t},o=function(e){var t=JSON.parse(e.dataset.sortCriteria);e.dataset.caption="Descending"===t.direction?e.dataset.caption+" "+r.Context.labels.translate("Descending"):e.dataset.caption+" "+r.Context.labels.translate("Ascending")};t.adjustDOMElements=function(e){!function(e){if(e.querySelector(".CoveoSortDropdown"))for(var t=0,n=e.querySelectorAll('.CoveoSort[data-sc-enable-both-sort-directions="true"]');t<n.length;t++){var r=n[t],a=i(r);r.insertAdjacentElement("afterend",a),o(r),o(a)}}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(38),i=n(39),o=n(40),a=n(41),c=n(42),s=n(43),l=n(44),u=n(8),d=n(45),p=n(47),f=function(){function e(){}return e.getAllPrebindHelpers=function(){return[new r.AnalyticsEnabledPrebind,new i.CoveoForSitecoreAnalyticsEndpointPrebind,new o.CurrentMaximumAge,new a.CurrentPageNamePrebind,new c.FieldTranslatorPrebind,new s.IsAnonymousPrebind,new l.MainSearchInterfaceSelectorPrebind,new u.ItemIdSelectorPrebind,new d.SortCriteriaPrebind,new p.UnfoldDictionaryToAttributesPrebind]},e}();t.PrebindHelpers=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="analyticsEnabled"}return e.prototype.getPrebind=function(e){return function(t,n){return e.context.scAnalyticsEnabled?"true":"false"}},e}();t.AnalyticsEnabledPrebind=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="coveoForSitecoreAnalyticsEndpoint"}return e.prototype.getPrebind=function(e){return function(t,n){return t||e.context.scRestEndpointUri+"/ua"}},e}();t.CoveoForSitecoreAnalyticsEndpointPrebind=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="currentMaximumAge"}return e.prototype.getPrebind=function(e){return function(t,n){return t||e.context.scMaximumAge.toString()}},e}();t.CurrentMaximumAge=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="currentPageName"}return e.prototype.getPrebind=function(e){return function(t,n){return t||e.context.scPageName}},e}();t.CurrentPageNamePrebind=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="fieldTranslator"}return e.prototype.getPrebind=function(e){return function(t,n){return e.fieldsHandler.toCoveo(t)}},e}();t.FieldTranslatorPrebind=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="isAnonymous"}return e.prototype.getPrebind=function(e){return function(t,n){return e.context.scIsUserAnonymous?"true":"false"}},e}();t.IsAnonymousPrebind=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(0),o=function(){function e(){this.name="mainSearchInterfaceSelector",this.resolvers=[new r.ResolveIfSelector,new r.ResolveIfItemIdInPage,new a,new r.UseItemIdSelectorAsIs]}return e.prototype.getPrebind=function(e){var t=this;return function(e,n){return t.getFirstValidResolver(e,n).getValue(e,n)}},e.prototype.getFirstValidResolver=function(e,t){var n;do{if(0===this.resolvers.length){var r="Could not resolve the search interface element using the current resolver. Ensure that a valid value is set.";throw console.error(r,{mainSearchInterfaceId:e,element:t}),r}n=this.resolvers.shift()}while(!n.canResolve(e,t));return n},e}();t.MainSearchInterfaceSelectorPrebind=o;var a=function(){function e(){}return e.prototype.canResolve=function(e,t){return null!==this.getValue(e,t)},e.prototype.getValue=function(e,t){return void 0===this.foundId&&(this.foundId=this.tryFindParentSearchInterfaceFromElement(t)),this.foundId},e.prototype.tryFindParentSearchInterfaceFromElement=function(e){var t=this.findParentWithClass(e,"Coveo"+i.SearchInterface.ID);return t?"#"+t.id:null},e.prototype.findParentWithClass=function(e,t){for(var n=e.parentElement;(n=n.parentElement)&&!n.classList.contains(t););return n},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=function(){function e(){this.name="sortCriteriaResolver"}return e.prototype.getPrebind=function(e){var t=new r.SortCriteriaResolver(e.fieldsHandler);return function(e,n){var r=JSON.parse(e);if(0===Object.keys(r).length)return null;var i=(r.type||"relevancy").toLowerCase(),o=(r.direction||"ascending").toLowerCase(),a="true"===(n.dataset.scEnableBothSortDirections||"false").toLowerCase(),c=document.querySelector(".coveo-sort-section .CoveoSortDropdown"),s=document.body.contains(c);if("relevancy"===i)return t.resolveRelevancyCriteria();if("date"===i)return t.resolveDateCriteria(o,a,s);var l=r.field;return t.resolveFieldCriteria(l,o,a,s)}},e}();t.SortCriteriaPrebind=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.fieldsHandler=e}return e.prototype.resolveFieldCriteria=function(e,t,n,r){var i="@"!==e.charAt(0)?"@"+e:e;return this.getFieldCriteria(this.fieldsHandler.toCoveo(i),t,n,r)},e.prototype.resolveDateCriteria=function(e,t,n){return this.getFieldCriteria("date",e,t,n)},e.prototype.resolveRelevancyCriteria=function(){return"relevancy"},e.prototype.getFieldCriteria=function(e,t,n,r){return n&&!r?this.getFieldWithDirection(e,t)+", "+this.getFieldWithDirection(e,this.getInvertedDirection(t)):this.getFieldWithDirection(e,t)},e.prototype.getFieldWithDirection=function(e,t){return e+" "+t},e.prototype.getInvertedDirection=function(e){return"descending"===e?"ascending":"descending"},e}();t.SortCriteriaResolver=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="unfoldDictionaryToAttributesPrebind"}return e.prototype.getPrebind=function(e){return function(t,n){var r=JSON.parse(t);return Object.keys(r).forEach(function(t){var i=e.fieldsHandler.toCoveo(t),o="field"+i.charAt(0).toUpperCase()+i.slice(1);n.dataset[o]=r[t]}),t}},e}();t.UnfoldDictionaryToAttributesPrebind=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(){}return e.configureSitecoreEndpoint=function(t){if(void 0===t)throw Error("You must define endpoint options when calling 'configureSitecoreEndpoint'.");e.getAccessToken().then(function(n){e.initializeEndPoint(t,n),e.dispatchInitializationEvent()})},e.initializeEndPoint=function(t,n){var i=e.createNewEndpoint(t,n);r.SearchEndpoint.endpoints.default=i},e.dispatchInitializationEvent=function(){var e=document.createEvent("CustomEvent");e.initEvent("CoveoSearchEndpointInitialized",!1,!0),document.dispatchEvent(e)},e.getAccessToken=function(){return e.fetchAccessToken().then(function(e){if(e.ok)return e.json()}).then(function(e){return e.token}).catch(function(){return""})},e.fetchAccessToken=function(){return fetch("/coveo/rest/token")},e.createNewEndpoint=function(t,n){return new r.SearchEndpoint({restUri:t.restEndpointUri?t.restEndpointUri+"/search":"/coveo/rest/search",queryStringArguments:{sitecoreItemUri:t.itemUri,siteName:t.siteName},accessToken:n,renewAccessToken:e.getAccessToken})},e}();t.SearchEndpoint=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(11),o=n(12),a=n(0),c=function(){function e(e,t){void 0===e&&(e=i.getExperienceEditorInstance()),void 0===t&&(t=r.getInitializerInstance()),this.experienceEditor=e,this.searchInterfaceComponentInitializer=t,this.searchInterfacesProvider=new o.SearchInterfacesProvider}return e.prototype.initializeExternalComponentSection=function(e){var t=this.findSearchInterfaceForSection(e);if(t)this.searchInterfaceComponentInitializer.loadComponentsWithSearchInterfaceInitialization(t,e);else{var n=this.getAllSearchInterfaceIdsInPage();n.length>0&&console.error("Could not find the search interface element with the following ID: "+this.getSearchInterfaceId(e)+". The following IDs were found: "+n.join(",")+".",e)}},e.prototype.initializeExperienceEditorHooksForExternalComponentsSection=function(e){var t=this,n=this.findSearchInterfaceForSection(e);n&&this.experienceEditor.registerOnLoadRenderingFromUrl(function(r){var i=t.experienceEditor.getComponentFromLoadRenderingFromUrlCallbackData(r);e.contains(i)&&t.searchInterfaceComponentInitializer.loadComponentsForSearchInterface(a.get(n,a.SearchInterface),i)})},e.prototype.findSearchInterfaceForSection=function(e){var t=this.getSearchInterfaceId(e),n=document.getElementById(t);if(n)return n},e.prototype.getSearchInterfaceId=function(e){return e.dataset.searchInterfaceId},e.prototype.getAllSearchInterfaceIdsInPage=function(){return this.searchInterfacesProvider.getSearchInterfacesInPage(["SearchInterface"]).map(function(e){return e.id}).filter(function(e){return!!e})},e}();t.ExternalComponentInitializer=c},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,c)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),a=n(13),c=n(0),s=function(){function e(){this.searchInterfacesProvider=new o.SearchInterfacesProvider}return e.prototype.initSearchboxIfStandalone=function(e,t,n){return r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return r=this.searchInterfacesProvider.getSearchInterfacesInPage(["Recommendation","SearchInterface"]),[4,this.waitForSearchInterfacesInitialization(r)];case 1:return i.sent(),this.searchboxElementIsNotInitialized(e)&&(t?(a.ElementWithContextInitializer.initializeContextWithinElement(e.parentElement),c.initSearchbox(e.parentElement,t,n)):console.warn('The search box is not included in any search interface and the "searchPageUri" parameters is not specified. Consider using a Global Searchbox instead.',e)),[2]}})})},e.prototype.searchboxElementIsNotInitialized=function(e){return void 0===c.get(e,Coveo.Searchbox)},e.prototype.waitForSearchInterfacesInitialization=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.getAllSearchInterfacesAfterComponentInitialization(e))];case 1:return t.sent(),[2]}})})},e.prototype.getAllSearchInterfacesAfterComponentInitialization=function(e){var t=this;return e.map(function(e){return c.$$(e)}).map(function(e){return t.waitForSearchInterfaceInitialization(e)})},e.prototype.waitForSearchInterfaceInitialization=function(e){return new Promise(function(t,n){if(e.hasClass("coveo-after-initialization"))return t();e.on(c.InitializationEvents.afterComponentsInitialization,function(){return t()})})},e}();t.SearchboxInitializer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(10),o=n(11),a=n(0),c=function(){function e(e,t){void 0===e&&(e=o.getExperienceEditorInstance()),void 0===t&&(t=i.getInitializerInstance()),this.experienceEditor=e,this.searchInterfaceComponentInitializer=t}return e.prototype.initSearchInterface=function(e){if(!this.experienceEditor.isInBackgroundRendering()){this.experienceEditor.registerShowDebugInformationCallback(),r.initContextOnElement(e);var t=a.init(e);return t.done(function(){var t=document.createEvent("CustomEvent");t.initEvent("SearchInterfaceInitialized",!1,!0),e.dispatchEvent(t)}),t}},e.prototype.initializeExperienceEditorHooksForSearchInterface=function(e){var t=this;this.experienceEditor.registerOnLoadRenderingFromUrl(function(n){var r=t.experienceEditor.getComponentFromLoadRenderingFromUrlCallbackData(n);if(e.contains(r)){var i=Coveo.get(e,Coveo.SearchInterface);t.searchInterfaceComponentInitializer.loadComponentsForSearchInterface(i,r)}}),this.experienceEditor.registerOnAfterPersonalizationChanged(function(n){if(e.contains(n)){var r=Coveo.get(e,Coveo.SearchInterface);t.searchInterfaceComponentInitializer.loadComponentsForSearchInterface(r,n)}}),this.experienceEditor.registerBeforeUnloadingChrome(function(n){if(e.contains(n)){var r=Coveo.get(e,Coveo.SearchInterface);t.searchInterfaceComponentInitializer.tryUnloadComponentsForSearchInterface(r,n)}})},e}();t.SearchInterfaceInitializer=c},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function c(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,c)}s((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.UNABLE_TO_RETRIEVE_ACCESS_TOKEN="Unable to retrieve access token."}return e.prototype.initializeSearchPage=function(e){var t=this;this.searchPageElement=e,this.searchEndpointUri=e.dataset.searchEndpointUri,this.organizationId=e.dataset.organizationId,this.searchHub=e.dataset.searchHub,this.isInExperienceEditor="true"===e.dataset.isInExperienceEditor,this.getAccessToken=this.getAccessToken.bind(this),this.getAccessToken().then(function(e){t.initializeCoveo(e)}).catch(function(e){t.isInExperienceEditor&&t.displayErrorMessageInExperienceEditor(e.message)})},e.prototype.getAccessToken=function(){return r(this,void 0,void 0,function(){var e=this;return i(this,function(t){return[2,this.fetchAccessToken().then(function(t){if(t.ok)return t.json();throw Error(e.UNABLE_TO_RETRIEVE_ACCESS_TOKEN)}).then(function(e){return e.token}).catch(function(t){return e.isInExperienceEditor&&e.displayErrorMessageInExperienceEditor(t.message),""})]})})},e.prototype.initializeCoveo=function(e){var t=document.querySelector(".CoveoSearchInterface");t&&"undefined"!=typeof Coveo&&(Coveo.SearchEndpoint.endpoints.default=new Coveo.SearchEndpoint({restUri:this.searchEndpointUri+"/rest/search/",accessToken:e,queryStringArguments:{organizationId:this.organizationId},renewAccessToken:this.getAccessToken}),Coveo.Analytics.options.searchHub.defaultValue=this.searchHub,Coveo.Analytics.options.organization.defaultValue=this.organizationId,Coveo.init(t))},e.prototype.fetchAccessToken=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,fetch("/coveo/rest/token")];case 1:return[2,e.sent()]}})})},e.prototype.displayErrorMessageInExperienceEditor=function(e){var t="\n            <span class='errorMessage'>"+e+"</span>\n        ";this.searchPageElement.insertAdjacentHTML("afterbegin",t)},e}();t.HostedSearchPageInitializer=o},,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var i=n(66);n.p=i.SitecorePublicPathUtils.getDynamicPublicPath();var o=n(6);t.CoveoForSitecoreContext=o.CoveoForSitecoreContext,n(67).lazyCoveoForSitecoreAnalytics(),n(68).lazyCoveoForSitecoreConfigureSearchHub(),n(69).lazyCoveoSendAnalyticsToSitecore(),n(70).lazyValidateAnalyticsIncluded(),n(71).lazyCoveoForSitecoreBindWithUserContext(),n(72).lazyCoveoForSitecoreExpressions(),n(73).lazyCoveoForSitecoreSyntax(),n(74).lazyCoveoForSitecoreRankingExpression(),n(75).lazyCoveoForSitecoreExternalContent(),n(76).lazyCoveoForSitecoreFilterExpression(),n(77).lazyCoveoForSitecoreLocalExpression(),n(78).lazyCoveoGoogleApiPositionProvider(),n(79).lazyCoveoNavigatorPositionProvider(),n(80).lazyCoveoStaticPositionProvider(),r(n(29)),r(n(30)),r(n(9))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(3),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getCoveoScript=function(){var e=this,t=a.nodeListToArray(document.querySelectorAll(".coveo-for-sitecore-script")).filter(function(t){return e.isScript(t)});return 0!==t.length?t[0]:(new o.Logger(this).warn("You should add the class coveo-for-sitecore-script on the script tag that includes the Coveo for Sitecore script. Not doing so may cause the framework to not be able to auto-detect the path to load the lazy chunks in certain environments.\n                More details here https://docs.coveo.com/en/295/javascript-search-framework/lazy-versus-eager-component-loading#fixing-code-chunks-loading-path-issues"),this.getCurrentScript())},t.isScript=function(e){return e&&o.$$(e).is("script")},t}(o.PublicPathUtils);t.SitecorePublicPathUtils=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreAnalytics=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreAnalytics",function(){return new Promise(function(e,t){n.e(2).then(function(){var t=n(15).CoveoForSitecoreAnalytics;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreAnalytics",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreConfigureSearchHub=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreConfigureSearchHub",function(){return new Promise(function(e,t){n.e(4).then(function(){var t=n(16).CoveoForSitecoreConfigureSearchHub;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreConfigureSearchHub",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoSendAnalyticsToSitecore=function(){r.LazyInitialization.registerLazyComponent("SendAnalyticsToSitecore",function(){return new Promise(function(e,t){n.e(13).then(function(){var t=n(17).SendAnalyticsToSitecore;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("SendAnalyticsToSitecore",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyValidateAnalyticsIncluded=function(){r.LazyInitialization.registerLazyComponent("ValidateAnalyticsIncluded",function(){return new Promise(function(e,t){n.e(15).then(function(){var t=n(18).ValidateAnalyticsIncluded;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("ValidateAnalyticsIncluded",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreBindWithUserContext=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreBindWithUserContext",function(){return new Promise(function(e,t){n.e(3).then(function(){var t=n(19).CoveoForSitecoreBindWithUserContext;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreBindWithUserContext",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreExpressions=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreExpressions",function(){return new Promise(function(e,t){n.e(5).then(function(){var t=n(20).CoveoForSitecoreExpressions;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreExpressions",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreSyntax=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreSyntax",function(){return new Promise(function(e,t){n.e(10).then(function(){var t=n(21).CoveoForSitecoreSyntax;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreSyntax",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreRankingExpression=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreRankingExpression",function(){return new Promise(function(e,t){n.e(9).then(function(){var t=n(22).CoveoForSitecoreRankingExpression;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreRankingExpression",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreExternalContent=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreExternalContent",function(){return new Promise(function(e,t){n.e(6).then(function(){var t=n(23).CoveoForSitecoreExternalContent;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreExternalContent",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreFilterExpression=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreFilterExpression",function(){return new Promise(function(e,t){n.e(7).then(function(){var t=n(24).CoveoForSitecoreFilterExpression;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreFilterExpression",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoForSitecoreLocalExpression=function(){r.LazyInitialization.registerLazyComponent("ForSitecoreLocalExpression",function(){return new Promise(function(e,t){n.e(8).then(function(){var t=n(25).CoveoForSitecoreLocalExpression;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("CoveoForSitecoreLocalExpression",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoGoogleApiPositionProvider=function(){r.LazyInitialization.registerLazyComponent("GoogleApiPositionProvider",function(){return new Promise(function(e,t){n.e(11).then(function(){var t=n(26).GoogleApiPositionProvider;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("GoogleApiPositionProvider",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoNavigatorPositionProvider=function(){r.LazyInitialization.registerLazyComponent("NavigatorPositionProvider",function(){return new Promise(function(e,t){n.e(12).then(function(){var t=n(27).NavigatorPositionProvider;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("NavigatorPositionProvider",e))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.lazyCoveoStaticPositionProvider=function(){r.LazyInitialization.registerLazyComponent("StaticPositionProvider",function(){return new Promise(function(e,t){n.e(14).then(function(){var t=n(28).StaticPositionProvider;e(t)}.bind(null,n)).catch(r.LazyInitialization.buildErrorCallback("StaticPositionProvider",e))})})}}])});
//# sourceMappingURL=CoveoForSitecore.Lazy.min.js.map