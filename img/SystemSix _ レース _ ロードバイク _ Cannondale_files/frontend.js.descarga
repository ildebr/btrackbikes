!function(e){let t=!1;class s{constructor(e){this.elem=e,this.trigger=this.elem.querySelector(".trigger"),this.trigger.insertAdjacentHTML("beforeend",'<div class="selected"><div class="text"></div><span class="indicator"></span></div>');const t=this.elem.querySelector(".new-select");t?this.newSelect=t:(this.newSelect=document.createElement("div"),this.newSelect.className="new-select",this.elem.appendChild(this.newSelect)),"auto"!==this.elem.getAttribute("data-create")&&0!==this.newSelect.innerHTML.length||(this.newSelect.innerHTML=qsa("option",this.elem).map((e=>`\n          <a class="option" data-value="${e.value}">\n            <div class="text">${e.textContent}</div>\n            <span class="indicator"></span>\n          </a>\n        `)).join(""))}static setClickEvents(){t||(t=!0,document.addEventListener("click",(e=>{if(e.target.closest(".bike-registration"))return;const t=e.target.closest(".dropdown");if(t){e.preventDefault(),e.stopPropagation(),t.classList.contains("is-open")?t.classList.remove("is-open"):(qsa(".dropdown.is-open,.filter-product .all-filters-panel.is-open").forEach((e=>e.classList.remove("is-open"))),qsa(".filter-product .all-filters-trigger.is-active").forEach((e=>e.classList.remove("is-active"))),t.classList.add("is-open"));const s=e.target.closest(".new-select a");if(s){const e=t.querySelector("select"),i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),e.value=s.getAttribute("data-value"),e.dispatchEvent(i)}}else qsa(".dropdown.is-open").forEach((e=>e.classList.remove("is-open")))})))}}class i{constructor(e){this.elem=e,this.primaryNavigationSection=document.getElementById("PrimaryNavigation"),this.siteHeader=document.getElementById("site-header-wrap"),this.generalSiteLinks=document.getElementById("general-site-links"),this.menuOpenButton=document.getElementById("nav-open"),this.menuCloseButton=document.getElementById("nav-close"),this.primaryNavigationTriggers=e.querySelectorAll(".nav-primary-trigger"),this.secondaryNavigationTriggers=e.querySelectorAll(".nav-secondary-trigger"),this.primaryNavigationContainers=e.querySelectorAll(".nav__primary"),this.navLinkColumns=e.querySelectorAll(".nav__tertiary"),this.categoryFilter=document.getElementById("category"),this.modelFilter=document.getElementById("model"),this.bikesByCategory=document.getElementById("bikes-by-category"),this.bikesByModel=document.getElementById("bikes-by-model")}initNewNavigation(){this.bikesByModel&&this.bikesByModel.classList.add("hidden"),this.menuOpenButton.addEventListener("click",(e=>{this.primaryNavigationSection.classList.add("menu-open"),this.menuOpenButton.classList.add("hidden"),this.menuCloseButton.classList.remove("hidden"),this.siteHeader.classList.add("pin-header")})),this.menuCloseButton.addEventListener("click",(e=>{this.primaryNavigationSection.querySelectorAll(".nav__primary").forEach((e=>e.classList.remove("nav-primary-active","hidden"))),this.primaryNavigationSection.querySelectorAll(".nav-secondary-active").forEach((e=>e.classList.remove("nav-secondary-active"))),this.generalSiteLinks.classList.remove("hidden"),this.primaryNavigationSection.classList.remove("menu-open"),this.menuOpenButton.classList.remove("hidden"),this.menuCloseButton.classList.add("hidden"),this.siteHeader.classList.remove("pin-header")})),this.primaryNavigationTriggers.forEach((e=>{e.addEventListener("click",(t=>{this.primaryNavigationSection.classList.contains("menu-open")&&t.preventDefault(),this.primaryMenuToggle(e),this.generalSiteLinks.classList.contains("hidden")?this.generalSiteLinks.classList.remove("hidden"):this.generalSiteLinks.classList.add("hidden")}))})),this.secondaryNavigationTriggers.forEach((e=>{e.addEventListener("click",(t=>{this.primaryNavigationSection.classList.contains("menu-open")&&t.preventDefault(),this.secondaryMenuToggle(e)}))})),this.primaryNavigationContainers.forEach((e=>{e.addEventListener("mouseover",(()=>{this.siteHeader.classList.add("pin-header")}))})),this.siteHeader.addEventListener("mouseout",(()=>{this.primaryNavigationSection.classList.contains("menu-open")||this.siteHeader.classList.remove("pin-header")})),this.categoryFilter&&this.bikesByCategory&&this.modelFilter&&this.bikesByModel&&(this.categoryFilter.addEventListener("click",(e=>{e.preventDefault(),this.categoryFilter.classList.add("selected"),this.bikesByCategory.classList.remove("hidden"),this.modelFilter.classList.remove("selected"),this.bikesByModel.classList.add("hidden")})),this.modelFilter.addEventListener("click",(e=>{e.preventDefault(),this.modelFilter.classList.add("selected"),this.bikesByModel.classList.remove("hidden"),this.categoryFilter.classList.remove("selected"),this.bikesByCategory.classList.add("hidden")})))}primaryMenuToggle(e){const t=e.closest(".nav__primary"),s=t.querySelectorAll(".nav__secondary"),i=e.closest(".nav__mobile-panel").querySelectorAll(".nav__primary");t.classList.contains("nav-primary-active")?(t.classList.remove("nav-primary-active"),s.forEach((e=>{e.classList.contains("nav-secondary-active")&&e.classList.remove("nav-secondary-active")}))):t.classList.add("nav-primary-active"),i.forEach((e=>{e!==t&&(e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden"))}))}secondaryMenuToggle(e){const t=e.closest(".nav__secondary");e.closest(".nav__item-links").querySelectorAll(".nav__secondary").forEach((e=>{e!==t&&e.classList.contains("nav-secondary-active")&&(e.classList.contains("nav-secondary-active")?e.classList.remove("nav-secondary-active"):e.classList.add("nav-secondary-active"))})),t.classList.contains("nav-secondary-active")?t.classList.remove("nav-secondary-active"):t.classList.add("nav-secondary-active")}}window.cannondaleJS={init:()=>{cannondaleJS.disabledLinks(),cannondaleJS.modals(),cannondaleJS.accordion(),cannondaleJS.cart(),cannondaleJS.expandable(),cannondaleJS.tabbedLayout(),cannondaleJS.navigation(),cannondaleJS.showhide(),cannondaleJS.inputFocus('[data-focus="input"]',".trigger"),cannondaleJS.labelSwap(".label-swap"),cannondaleJS.fixHover(),cannondaleJS.contentAssist(".content-assist"),cannondaleJS.languages(".languages"),cannondaleJS.video(".video"),cannondaleJS.makeSticky(".hero-pdp .actions",".hero-pdp",1,1,.5),cannondaleJS.makeSticky(".filter-product",".filter-product-scroll-reference",0,0,0);cannondaleJS.cosmetics([".billboard",".hero-pdp",".hero-about",".crosslink-content",".hero-bike-finder",".hero-checkout-confirmation",".hero-collections",".product-card.large",".product-card.wide"].join()),cannondaleJS.captionWidth(".photo-split .photo-container"),cannondaleJS.hotspots(),cannondaleJS.dropdown(".dropdown:not(.ignore-auto-dropdown)");cannondaleJS.searchVisibility([".search-location",".archive-search"].join()),cannondaleJS.productFilter(),cannondaleJS.suspensionFilter("[data-filter]"),cannondaleJS.swaptext("[data-swaptext]"),cannondaleJS.toggler("[data-toggletarget]"),cannondaleJS.terrainCarousel("body:not(.sc-editor) .carousel-terrain"),cannondaleJS.blogCarousel("body:not(.sc-editor) .carousel-blog"),cannondaleJS.collectionCarousel("body:not(.sc-editor) .carousel-collection"),cannondaleJS.consumerBenefits("body:not(.sc-editor) .consumer-benefits"),cannondaleJS.imageCarousel(".carousel-image"),cannondaleJS.categoryCarousel(".category-carousel"),cannondaleJS.productCarousel(".carousel-product > .carousel-container"),cannondaleJS.AboutUsHeroHeight(),cannondaleJS.errorPopups(),cannondaleJS.ValidateForms(),cannondaleJS.ProgressiveLoadingImages(),cannondaleJS.stickyHeader();const e=document.querySelector(".header-search");if(e){const t=document.querySelector('.panel[data-panel="showhide-search-header"]');new MutationObserver((()=>{t.classList.contains("is-open")?e.classList.add("search-open"):e.classList.remove("search-open")})).observe(t,{attributes:!0})}},disabledLinks:()=>{document.addEventListener("click",(e=>{const t=e.target;if(t&&t.hasAttribute("data-disabled"))return e.preventDefault(),e.stopPropagation(),!1}))},modals:()=>{function e(e){const t="string"==typeof e?document.querySelector(`[data-modal-name="${e}"]`):e;t.classList.toggle("modalOpen"),t.classList.contains("modalOpen")?document.documentElement.classList.add("modalopen"):document.documentElement.classList.remove("modalopen")}function t(t){t.querySelectorAll(".triggerModalClose").forEach((s=>s.addEventListener("click",(function(s){s.target===this&&e(t)}))))}class s{constructor(e){this.elem=document.createElement("div"),this.elem.className=e.modalClassName?["modal",e.modalClassName].join(" "):"modal",this.elem.setAttribute("data-modal-name",e.name),this.elem.innerHTML=`\n            <div class="modalOuter">\n              <div class="modalInner">\n                ${e.content}\n              </div>\n            </div>\n          `,document.body.appendChild(this.elem),t(this.elem)}toggle(){e(this.elem)}}window.cjsQuickModal=e=>new s(e),window.cjsToggleModal=t=>e(t),qsa("div[data-modal-name]").forEach((e=>{const s=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div");e.classList.add("modal"),s.className="modalOuter",i.className="modalInner",a.className="closeModal triggerModalClose",Array.from(e.children).forEach((e=>i.appendChild(e))),s.appendChild(i),s.appendChild(a),e.appendChild(s),document.body.appendChild(e),t(e)})),qsa("[data-modal-trigger]").forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault();e(this.getAttribute("data-modal-trigger"))}))}))},navigation:()=>{const e=document.getElementById("MainNavigation");if(e){new i(e).initNewNavigation()}},accordion:()=>{const e=qsa(".accordion .sortable-item .panel"),t=()=>{e.forEach((e=>{e.style.setProperty("--max-height",[e.scrollHeight,"px"].join(""))}))};t(),debouncedListener("resize",t,250)},cart:()=>{const e=document.querySelector(".header-cart .trigger"),t=document.getElementById("MiniCart");if(!e||!t)return!1;const s=document.querySelector(".header-cart"),i=[];window.c=i;let a=null;class r{constructor(e){this.elem=e,this.cartEmpty=e.querySelector(".cart-section__empty"),this.cartSummary=e.querySelector(".cart-section__summary"),this.cartItems=e.querySelector(".cart-section__summary-list"),this.subtotalElem=e.querySelector(".cart-section__subtotal"),this.call2recycleElem=e.querySelector(".call2recycle__line-item"),this.call2recycleFeeElem=e.querySelector(".cart-section__recycle-fee"),this.checkoutLink=e.querySelector(".cart-section__checkout-link"),this.errorSummaries=e.querySelectorAll(".cart-section__error-summary"),this.cartText={COLOR:this.cartSummary.getAttribute("data-colorlabel")||"Color",QUANTITY:this.cartSummary.getAttribute("data-quantitylabel")||"QTY.",REMOVE:this.cartSummary.getAttribute("data-removelabel")||"Remove",SIZE:this.cartSummary.getAttribute("data-sizelabel")||"Size",GHOST:{REMOVED:this.cartSummary.getAttribute("data-removedlabel")||"has been removed from your cart"}},this.loadingGraphic=new window.LoadingGraphic(this.cartSummary,{position:"fixed",background:"white"}),this.cartSummary.addEventListener("click",(e=>{const t=e.target.closest("[data-action]");if(t&&!t.classList.contains("disabled")){switch(t.getAttribute("data-action")){case"remove":r.removeItem(t.getAttribute("data-sku"),t.getAttribute("data-quantity"));break;case"quantity-up":r.addItem(t.getAttribute("data-salsify-id"),t.getAttribute("data-sku"));break;case"quantity-down":r.removeItem(t.getAttribute("data-sku"))}}}))}static async initialize(){i.forEach((e=>e.loadingGraphic.start()));try{const e=await window.EndpointManager.post("/api/cart",{});r.populateCarts(e)}catch(e){console.log("An error occurred retrieving the cart",e)}finally{i.forEach((e=>e.loadingGraphic.end()))}}static async addItem(e,t,s){i.forEach((e=>e.loadingGraphic.start()));const a=!t||s;t||(t=window.selectedVariant.Sku,e=window.productSalsifyId),a||i.forEach((e=>e.elem.classList.remove("status-added")));try{const o=await window.EndpointManager.post("/api/cart/items",{SalsifyId:e,sku:t,Quantity:1}),n=o.Lines.find((({Sku:e})=>e===t));if(n)r.populateCarts(o),r._gaUpdateCart(n,"add",1,a),a&&(i.forEach((e=>e.elem.classList.add("status-added"))),window.showMiniCart());else if(o.Messages){const e=o.Messages.find((e=>50===e.Code));if(e){window.cjsQuickModal({name:"out-of-stock-error-modal",modalClassName:"checkout__error-modal -no-fullscreen-mobile",content:`\n                    <h2 class="headline">${window.messaging.errorEmoji||""}</h2>\n                    <p>${e.Message}</p>\n                    <br>\n                    <a class="triggerModalClose button inverted">${window.messaging.closeErrorModal||"OK"}</a>\n                  `}).toggle();const t=s||document.getElementById("AddToCartButton");t&&a&&(t.querySelector(".-in-stock").classList.add("hidden"),t.querySelector(".-out-of-stock").classList.remove("hidden"),t.classList.add("disabled"))}}}catch(e){console.log("An error occurred retrieving the cart",e)}finally{i.forEach((e=>e.loadingGraphic.end()))}}static async removeItem(e,t=1){i.forEach((e=>e.loadingGraphic.start()));try{const s=a.Lines.find((({Sku:t})=>t===e));1===t?r._gaUpdateCart(s,"remove"):r._gaUpdateCart(s,"remove",s.Quantity);const o=`/api/cart/items/${e}/${t}`,n=await window.EndpointManager.delete(o,{});r.populateCarts(n)}catch(e){console.log("An error occurred retrieving the cart",e)}finally{i.forEach((e=>e.loadingGraphic.end()))}}static populateCarts(t){if(localStorage.removeItem("StoredStep"),t){const e=r.prepareData(t);e.cartSectionTitles.length&&i.forEach((t=>t.render(e)))}else console.warn("Cart error: ","Server returned no cart data"),e.setAttribute("data-error","error")}static _gaUpdateCart(e,t,s=1,i=!0){ga("gtm4.ec:addProduct",{id:e.Sku,name:e.ProductTitle,category:e.CategoryName,brand:"Cannondale",variant:`Size:${e.Size}|Color:${e.Color}`,price:e.Price,quantity:s}),ga("gtm4.ec:setAction",t),ga("gtm4.send","event","UX","click","add to cart");const a=e.ProductUrl.substring(8).split("/")[4],r=a[0].toUpperCase()+a.substring(1);dataLayer.push({ecommerce:null}),dataLayer.push({event:"add"===t?"add_to_cart":"remove_from_cart",ecommerce:{items:[{item_id:e.Sku.substring(0,7),item_name:[e.ProductTitle,e.ProductSubtitle].join(" "),affiliation:"Cannondale Website",currency:window.currencyCode||"",discount:e.Msrp-e.Price,item_brand:"Cannondale",item_category:e.ProductType,item_category2:e.CategoryName,item_category3:r,item_category4:e.ProductTitle,item_list_id:i?"":"cart",item_list_name:i?"":"Cart",item_variant:[e.Color,e.Size].join("|").toLowerCase(),price:e.Msrp,quantity:s}]}})}static prepareData(t){if(0==t.Lines.length&&!a)return i.forEach((e=>e.setEmpty())),e.removeAttribute("data-quantity"),e.removeAttribute("data-error"),{cartSectionTitles:[],cartSections:{}};const s=window.utilities.parseMessagesObject(t.Messages),r=t.Lines.map((e=>{const t=s.MessageLookup[e.Sku];return t&&(e.errorMsg=t.Message,e.errorCode=t.Code),e}));a&&a.Lines.forEach(((e,s)=>{t.Lines.filter((t=>t.Sku===e.Sku))[0]||(e.isGhost=!0,r.splice(s,0,e))})),a=t;const o=[],n=r.reduce(((e,t)=>{const s=t.ProductType;return e[s]||(o.push(s),e[s]=[]),e[s].push(t),e}),{});return s.HasError?e.setAttribute("data-error","error"):(e.removeAttribute("data-error"),a&&a.Lines.length>0?e.setAttribute("data-quantity",a.ItemCount):e.removeAttribute("data-quantity")),{cartSectionTitles:o,cartSections:n,HasError:s.HasError}}setEmpty(){this.cartEmpty.classList.remove("hidden"),this.cartSummary.classList.add("hidden"),this.onEmpty&&this.onEmpty()}render(e){this.cartEmpty.classList.add("hidden"),this.cartSummary.classList.remove("hidden"),this.cartItems.innerHTML=`${e.cartSectionTitles.map((t=>`\n            <h3 class="Cart-section-header">${t}</h3>\n            ${e.cartSections[t].map((e=>this.renderCartItem(e))).join("")}\n          `)).join("")}`,e.HasError?(this.checkoutLink.setAttribute("data-disabled","disabled"),this.errorSummaries.forEach((e=>e.classList.remove("hidden")))):(this.checkoutLink.removeAttribute("data-disabled"),this.errorSummaries.forEach((e=>e.classList.add("hidden")))),this.call2recycleFeeElem.textContent=a.RecycleFeeTotalFormatted,a.RecycleFeeTotal>0?this.call2recycleElem.classList.remove("hidden"):this.call2recycleElem.classList.add("hidden"),this.subtotalElem.textContent=a.SubtotalFormatted,this.onRender&&this.onRender()}renderGhostItem(e){return`<div class="Cart-item">\n            <a class="Cart-item-img-link" href="${e.ProductUrl}">\n              <div class="Cart-item-img" style="background-image: url(${e.PreviewImageUrl}); opacity: 0.2;"></div>\n            </a>\n            <div class="Cart-item-details" style="align-self: stretch;">\n              <p><a href="${e.ProductUrl}">${e.ProductTitle} ${e.ProductSubtitle}</a> ${this.cartText.GHOST.REMOVED}</p>\n            </div>\n          </div>`}renderCartItem(e){return e.isGhost?this.renderGhostItem(e):`<div class="Cart-item">\n            <a class="Cart-item-img-link" href="${e.ProductUrl}">\n              <div class="Cart-item-img" style="background-image: url(${e.PreviewImageUrl});"></div>\n            </a>\n            <div class="Cart-item-details">\n              <div class="row-spread">\n                <h3 class="Cart-item-details-title">\n                  <a href="${e.ProductUrl}">\n                    ${e.ProductTitle}\n                    <span class="Cart-item-details-subtitle">${e.ProductSubtitle}</span>\n                  </a>\n                </h3>\n                <a class="Cart-link-remove" data-action='remove' data-quantity="0" data-sku="${e.Sku}">${this.cartText.REMOVE}</a>\n              </div>\n              <p class="Cart-item-size_and_color">${e.Size} / ${e.Color}</p>\n              <div class="row-spread">\n                <div class="Cart-item-quantity">\n                  <span>${this.cartText.QUANTITY}</span>\n                  <a class="Cart-item-quantity-arrow${1===e.Quantity?" disabled":""}" data-action="quantity-down" data-sku="${e.Sku}"><i class="icon icon-caret-small-down"></i></a>\n                  <span class="Cart-item-quantity-display">${e.Quantity}</span>\n                  <a class="Cart-item-quantity-arrow${e.Quantity>=e.Inventory?" disabled":""}" data-action="quantity-up" data-salsify-id="${e.SalsifyId}" data-sku="${e.Sku}"><i class="icon icon-caret-small-up"></i></a>\n                </div>\n                <p class="Cart-item-price">${e.PriceFormatted}</p>\n              </div>\n              ${e.errorMsg?30===e.errorCode?`\n              <div class="Cart-item__out-of-stock">\n                <span>${e.errorMsg}</span>\n              </div>\n              `:`\n              <div class="error-label" style="margin-top: 20px;">\n                <span class="error-label__msg fullWidth">${e.errorMsg}</span>\n                <div class="error-label__indicator"></div>\n                <div class="error-label__popup fade-elem faded"></div>\n              </div>\n              `:""}\n            </div>\n          </div>`}}const o=document.querySelectorAll(".add-to-cart-button"),n=document.getElementById("FullCart"),l=new r(t),c=n?new r(n):null;i.push(l),c&&(i.push(c),c.renderCartItem=function(e){return e.isGhost?this.renderGhostItem(e):`<div class="Cart-item">\n            <a class="Cart-item-img-link" href="${e.ProductUrl}">\n              <div class="Cart-item-img" style="background-image: url(${e.PreviewImageUrl});"></div>\n            </a>\n            <div class="Cart-item-details">\n              <div>\n                <h3 class="Cart-item-details-title">\n                  <a href="${e.ProductUrl}">\n                    ${e.ProductTitle}\n                    <span class="Cart-item-details-subtitle">${e.ProductSubtitle}</span>\n                  </a>\n                </h3>\n              </div>\n              <div class="row-spread Cart-item-mobile-spread">\n                <div class="Cart-item-size_and_color">\n                  <p>${this.cartText.COLOR}: ${e.Color}</p>\n                  <p>${this.cartText.SIZE}: ${e.Size}</p>\n                </div>\n                <div class="Cart-item-quantity">\n                  <span>${this.cartText.QUANTITY}</span>\n                  <a class="Cart-item-quantity-arrow${1===e.Quantity?" disabled":""}" data-action="quantity-down" data-sku="${e.Sku}"><i class="icon icon-caret-small-down"></i></a>\n                  <span class="Cart-item-quantity-display">${e.Quantity}</span>\n                  <a class="Cart-item-quantity-arrow${e.Quantity>=e.Inventory?" disabled":""}" data-action="quantity-up" data-salsify-id="${e.SalsifyId}" data-sku="${e.Sku}"><i class="icon icon-caret-small-up"></i></a>\n                </div>\n                <a class="Cart-link-remove" data-action='remove' data-quantity="0" data-sku="${e.Sku}">${this.cartText.REMOVE}</a>\n                <p class="Cart-item-price">${e.PriceFormatted}</p>\n                ${e.errorMsg?`\n                <div class="error-label"><span class="error-label__msg fullWidth">${e.errorMsg}</span><div class="error-label__indicator"></div><div class="error-label__popup fade-elem faded"></div></div>\n                `:""}\n              </div>\n            </div>\n          </div>`},c.rightSideElem=document.getElementById("FullCart__right-side"),c.onEmpty=function(){this.rightSideElem.classList.add("hidden"),this.elem.classList.add("FullCart__empty")},c.onRender=function(){this.rightSideElem.classList.remove("hidden")}),l.mobileQuantity=document.getElementById("mcSummary-mobile-quantity"),l.onRender=function(){this.mobileQuantity.textContent=a.ItemCount},r.initialize(),window.hideMiniCart=()=>{s.style.removeProperty("z-index"),t.classList.add("hidden"),t.classList.remove("status-added")},window.showMiniCart=()=>{s.style.zIndex="5",t.classList.remove("hidden")},window.toggleMiniCart=()=>{t.classList.contains("hidden")?window.showMiniCart():window.hideMiniCart()},window.addItemToCart=e=>{const t=e.getAttribute("data-salsifyid"),s=e.getAttribute("data-sku");t&&s&&r.addItem(t,s,e)},o&&o.length&&o.forEach((e=>{e.addEventListener("click",(t=>{e.classList.contains("disabled")||r.addItem()}))}))},expandable:()=>{const e=qsa(".expandable-item__content"),t=()=>{e.forEach((e=>{e.style.setProperty("--max-height",[e.children[0].scrollHeight,"px"].join(""))}))};t(),qsa(".expandable-item__trigger").forEach((e=>{e.addEventListener("click",(t=>{e.closest(".expandable-item, .expandable-item__mobile-only").classList.toggle("is-open")}))})),debouncedListener("resize",t,250)},fixHover:()=>{document.addEventListener("touchstart",(function e(t){document.documentElement.classList.add("can-touch"),document.removeEventListener("touchstart",e,!1)}),!1)},contentAssist:t=>{let s=-1;qsa(t).forEach((t=>{const i=qsa(".paragraph-with-title",t),a=document.querySelector(`[data-target="${t.getAttribute("data-nav")}"]`);if(a){const t=document.createElement("nav");let r=-1;t.className="nav-contentassist",a.appendChild(t),i.forEach((e=>{const i=e.querySelector("h2"),a=i.textContent,o=`content-nav-${++s}-${++r}`;t.insertAdjacentHTML("beforeend",`<div class="item"><a class="link" data-ca-nav-id="${o}">${a}</a></div>`),i.id=o})),t.addEventListener("click",(t=>{const s=t.target.getAttribute("data-ca-nav-id");s&&e("html, body").animate({scrollTop:e(`#${s}`).position().top-50},500)}))}}))},languages:t=>{qsa(t).forEach((t=>{const s=e(t),i=s.closest(".panel");function a(){const e=-(s.offset().left-i.offset().left);s.css({"margin-left":e,width:i.outerWidth()})}var r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;e.fn.attrchange=function(e){if(r){var t={subtree:!1,attributes:!0},s=new r((function(t){t.forEach((function(t){e.call(t.target,t.attributeName)}))}));return this.each((function(){s.observe(this,t)}))}},s.attrchange((function(e){"class"==e&&container.toggleClass("specified")})),window.onload=()=>{setTimeout(a,1)}}))},cosmetics:e=>{const t=document.querySelector("[data-pagetheme]");if(t){const e=t.getAttribute("data-pagetheme");document.body.setAttribute("data-theme",e)}function s(e){const t=e.querySelector(".image picture img").currentSrc;e.style.backgroundImage=`url(${t})`}const i=[];qsa(e).forEach((e=>{switch(e.getAttribute("data-type")){case"color":e.style.backgroundColor=e.getAttribute("data-bg");break;case"image":s(e),i.push(e);break;case"diptych":qsa(".column",e).forEach((t=>{const s=t.getAttribute("data-bg"),i=t.querySelector(".background"),a=i.querySelector("picture img");s&&(e.style.backgroundColor=s),a&&(i.style.backgroundImage=`url(${a.currentSrc})`)}))}})),debouncedListener("resize",(()=>{i.forEach((e=>s(e)))}),250)},captionWidth:e=>{window.addEventListener("load",(function(){qsa(e).forEach((e=>{const t=e.querySelector("img").offsetWidth;e.querySelector("figcaption").style.width=[t,"px"].join("")}))}))},createBgImage:e=>{qsa(e).forEach((e=>{const t=e.querySelector("img").src;e.style.backgroundImage=`url(${t})`}))},terrainCarousel:e=>{qsa(e).forEach((e=>{const t=qsa(".title",e),s=qsa(".linkout",e),i=e.querySelector(".carousel-container"),a=document.createElement("div"),r=document.createElement("div"),o=window.utilities.createCarousel(e,(function(e,i,a,r){t[a].classList.add("is-hiding"),s[a].classList.add("is-hiding"),window.setTimeout((()=>{t.concat(s).forEach((e=>{e.classList.remove("is-hiding","is-visible")})),t[r].classList.add("is-visible"),s[r].classList.add("is-visible")}))}));a.className="all-titles",r.className="all-buttons",t.forEach((e=>a.appendChild(e))),s.forEach((e=>r.appendChild(e))),i.appendChild(a),i.appendChild(r),o.$carousel.on("init",(function(e){t[0].classList.add("is-visible"),s[0].classList.add("is-visible")})),document.addEventListener("DOMContentLoaded",(function(){o.init({prevArrow:'<button type="button" class="slick-prev"><i class="icon icon-arrow-large-left"></i></button>',nextArrow:'<button type="button" class="slick-next"><i class="icon icon-arrow-large-right"></i></button>',appendArrows:void 0,dots:!1,centerMode:!0,centerPadding:"13%",focusOnSelect:!0,speed:750,responsive:[{breakpoint:600,settings:{centerPadding:"11.5%"}},{breakpoint:1023,settings:{centerPadding:"22.5%"}}]});const t=e.querySelector(".slick-prev"),s=e.querySelector(".slick-next");t.addEventListener("mouseover",(function(){e.classList.add("hover-prev")})),s.addEventListener("mouseover",(function(){e.classList.add("hover-next")})),t.addEventListener("mouseout",(function(){e.classList.remove("hover-prev")})),s.addEventListener("mouseout",(function(){e.classList.remove("hover-next")}))}))}))},blogCarousel:e=>{function t(e){const t=e.querySelector(".text"),s=t.parentElement,i=t.clientWidth,a=t.clientHeight;e.classList.add("is-styled"),s.style.minHeight=[i,"px"].join(""),s.style.paddingLeft=[a,"px"].join(""),t.setAttribute("style",`width: ${i}px;`)}qsa(e).forEach((e=>{const s=window.utilities.createCarousel(e,(function(){qsa(".vertical:not(.is-styled)",this.elem).forEach(t)}));document.addEventListener("DOMContentLoaded",(function(){qsa(".vertical",s.elem).forEach(t),s.init({adaptiveHeight:!0,responsive:s.buildResponsiveOptions({variableWidth:!0,slidesToShow:2},{adaptiveHeight:!1,variableWidth:!0,slidesToShow:2})})}))})),debouncedListener("resize",(()=>{qsa(".vertical").forEach(t)}),250)},productCarousel:async e=>{qsa(e).forEach((async e=>{const t=window.productCarousels[e.id],s=await window.utilities.normalizeProductsFromCoveo(t.products,t.showAddToCart),i=e.querySelector(".scrollable-content");i.querySelector(".scrollable-content__scroller").innerHTML=s.map((e=>window.renderProductCard(e,{showAddToCart:t.showAddToCart}))).join(""),i.querySelectorAll("img").forEach((e=>{e.onload=function(){e.style.opacity=1}})),i.querySelectorAll(".add-to-cart-button").forEach((e=>{e.addEventListener("click",(t=>{window.addItemToCart(e)}))}));const a=window.utilities.gaList(s,t.title);i.querySelectorAll(".product-card__link").forEach((e=>{e.addEventListener("click",(t=>{a(t,e)}))})),window.utilities.createScrollableContent(i)}))},collectionCarousel:t=>{qsa(t).forEach((t=>{const s=e(t.querySelector(".slick-prev")),i=e(t.querySelector(".slick-next")),a=window.utilities.createCarousel(t,(function(){setTimeout((()=>{const e=t.querySelector(".slick-active img");if(e){const s=e.getAttribute("data-title"),i=e.getAttribute("data-subtitle"),a=e.getAttribute("data-url");t.querySelector(".carousel-collection__headline").innerHTML=`<span>${s}</span>${i}`,t.querySelector("a.button.secondary").href=a}}),1)}));document.addEventListener("DOMContentLoaded",(function(){a.init({prevArrow:s,nextArrow:i})}))}))},categoryCarousel:e=>{function t(e){return e.preventDefault(),!1}class s{constructor(e,t){this.upperElem=e.querySelector(".category-carousel__upper"),this.scrollElem=e.querySelector(".category-carousel__scroller"),this.scrollParent=this.scrollElem.parentElement,this.scrollBar=e.querySelector(".category-carousel__scrollbar"),this.scrollHead=e.querySelector(".category-carousel__scrollbar-head"),this.swipePositionHistory=[],this.transitionTimeout=null,this.transitionTimeoutLength=400,this.snapToFullSlide=!1,this.interactionType=null,this.items=t?Array.from(t):Array.from(this.scrollElem.children),this.itemsLen=this.items.length,this.arrows=e.querySelectorAll(".category-carousel__arrow"),this.arrows.forEach((e=>{e.addEventListener("click",(()=>{this.scrollByArrow(parseInt(e.dataset.direction))}))})),this.updateArrows(),this.scrollTimeout=null,this.swipeStartX=null,this.swipeStartY=null,this.swipeStartElemLeft=null,this.isSwiping=!1,this.shouldSwipe=!1,this.bindScrollInteractions(),this.scrollElem.addEventListener("scroll",(()=>{this.scrollTimeout&&window.clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout((()=>{this.updateArrows()}),100)})),this.scrollElem.addEventListener("resize",(()=>{this.scrollTimeout&&window.clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout((()=>{this.updateArrows()}),100)})),this.index=0}_saveSwipeStart(e,t,s){this.interactionType=s,this.disableScroll||(this.transitionTimeout&&window.clearTimeout(this.transitionTimeout),this._toggleTransitioning(!1),this.swipeStartX=e.pageX,this.swipeStartY=e.pageY,this.swipeStartElemLeft=this.scrollElem.getBoundingClientRect().left,this.swipeTargetElem=t,this.shouldSwipe=!0,this.swipePositionHistory=[this.swipeStartX],this.swipePositionInterval=window.setInterval((()=>{this.swipePositionHistory.push(this.currentX||this.swipeStartX)}),50))}_swipeMove(e){const s=e.pageX,i=s-this.swipeStartX,a=Math.abs(i)>Math.abs(e.pageY-this.swipeStartY);if(this.isSwiping||this.shouldSwipe&&a){this.currentX=s;const e=this.swipeStartElemLeft+i;this.isSwiping=!0,this.moveTo(e),"touch"===this.interactionType&&document.documentElement.classList.add("noScroll"),this.swipeTargetElem.addEventListener("click",t)}else this.isSwiping=!1}_endSwipe(){if(!this.isSwiping)return void(this.shouldSwipe=!1);this.swipePositionInterval&&window.clearInterval(this.swipePositionInterval);const e=this.swipePositionHistory.length-5,s=e<0?0:e,i=this.swipePositionHistory[s],a=this.currentX-i;let r=0===s?this.swipePositionHistory.length:5;0===r&&(r=1);const o=5*a/r;if(this.snapToFullSlide){const e=-o/Math.abs(o);this.scrollByArrow(e)}else this.scrollByArrow(null,-o);this.shouldSwipe=!1,this.isSwiping=!1,window.setTimeout((()=>{"touch"===this.interactionType&&document.documentElement.classList.remove("noScroll"),this.swipeTargetElem&&this.swipeTargetElem.removeEventListener("click",t)}),0)}bindScrollInteractions(){this.scrollParent.querySelectorAll("a").forEach((e=>e.ondragstart=e=>e.preventDefault())),this.scrollParent.ontouchstart=e=>{this._saveSwipeStart(e.changedTouches[0],e.target,"touch")},this.scrollParent.onmousedown=e=>this._saveSwipeStart(e,e.target,"pointer"),this.scrollParent.ontouchmove=e=>this._swipeMove(e.changedTouches[0]),this.scrollParent.onmousemove=e=>this._swipeMove(e),document.body.addEventListener("touchend",(e=>this._endSwipe(e.changedTouches[0]))),document.body.addEventListener("mouseup",(e=>this._endSwipe(e))),this.scrollParent.onmouseleave=e=>{this._endSwipe(e)}}_getMaxLeft(){return this.scrollParent.offsetWidth-this.scrollElem.scrollWidth-parseFloat(window.getComputedStyle(this.items[0]).marginLeft)}updateArrows(){const e=Math.floor(this.scrollElem.offsetLeft);this.disableScroll=!1,this.scrollBar.classList.remove("hidden"),this.scrollElem.scrollWidth-2<=this.scrollParent.offsetWidth?(this.arrows[0].classList.add("hidden"),this.arrows[1].classList.add("hidden"),this.scrollBar.classList.add("hidden"),this.scrollElem.classList.add("center-items"),this.upperElem.classList.add("center-items"),this.disableScroll=!0):0===e?(this.arrows[0].classList.add("hidden"),this.arrows[1].classList.remove("hidden")):e===Math.floor(this._getMaxLeft())?(this.arrows[0].classList.remove("hidden"),this.arrows[0].classList.add("move-right"),this.arrows[1].classList.add("hidden")):(this.arrows[0].classList.remove("hidden"),this.arrows[0].classList.remove("move-right"),this.arrows[1].classList.remove("hidden"))}updateItems(){this.items=Array.from(this.scrollElem.children),this.itemsLen=this.items.length,this.updateArrows()}getScrollDestination(e){let t;if(1===e)for(t=-1;++t<this.itemsLen;){if(this.items[t].offsetLeft>10)break}else for(t=this.itemsLen;--t>-1;){if(this.items[t].offsetLeft<-10)break}return-1*(this.items[0].offsetWidth*t+parseFloat(window.getComputedStyle(this.items[1]).marginRight)*t)}scrollToSlide(e){const t=-1*this.items[0].offsetWidth*e;this.moveTo(t,!0)}_toggleTransitioning(e){[this.scrollElem,this.scrollHead].forEach((t=>t.classList.toggle("-transitioning",e)))}moveTo(e,t,s){const i=this._getMaxLeft();let a=e>0?0:e<i?i:e;t&&1===s&&Math.abs(i-e)<150&&(a=i);const r=a/i*100,o=`calc(${r}% - ${r/100*this.scrollHead.clientWidth}px)`;this.scrollElem.style.marginLeft=[a,"px"].join(""),this.scrollHead.style.left=o,this.updateArrows()}scrollByArrow(e,t){let s;s=t?parseFloat(window.getComputedStyle(this.scrollElem).marginLeft)-t:this.getScrollDestination(e),this.transitionTimeout&&window.clearTimeout(this.transitionTimeout),this._toggleTransitioning(!0),this.moveTo(s,!0,e),this.transitionTimeout=window.setTimeout((()=>{this._toggleTransitioning(!1),this.updateArrows()}),this.transitionTimeoutLength)}}qsa(e).forEach((e=>{window.ScrollableContent=new s(e)}))},consumerBenefits:e=>{qsa(e).forEach((e=>{const t=qsa(".interaction",e),s=qsa(".headline",e);function i(){if(window.innerWidth>=1097){const e=[s.reduce(((e,t)=>t.clientHeight>e?t.clientHeight:e),0),"px"].join("");s.forEach((t=>t.style.height=e))}else s.forEach((e=>e.style.height=""))}t.forEach((e=>e.addEventListener("click",(function(){this.classList.toggle("is-open")})))),document.addEventListener("DOMContentLoaded",i),debouncedListener("resize",i)}))},imageCarousel:()=>{e(".carousel-image").flickity({freeScroll:!0,cellAlign:"left",contain:!0,prevNextButtons:!1,pageDots:!1,adaptiveHeight:!1,imagesLoaded:!0});let t,s=!1;document.body.addEventListener("touchstart",(function(e){e.target&&e.target.closest(".flickity-slider")?(s=!0,t={x:e.touches[0].pageX,y:e.touches[0].pageY}):s=!1})),document.body.addEventListener("touchmove",(function(e){if(s&&e.cancelable){const s={x:e.touches[0].pageX-t.x,y:e.touches[0].pageY-t.y};Math.abs(s.x)>7&&e.preventDefault()}}),{passive:!1})},makeSticky:function(e,t,s,i,a){const r=t?document.querySelector(t):null,o=qsa(e).map((e=>({elem:e,reference:r||e})));function n(){const e=window.innerWidth,t=e<window.cannondaleBreakpoints.tablet?s:e>window.cannondaleBreakpoints.desktop?a:i;o.forEach((e=>{var s=e.reference.offsetHeight*t;r.getBoundingClientRect().top+s<0?e.elem.classList.add("is-sticky"):e.elem.classList.remove("is-sticky")}))}n(),debouncedListener("scroll",n,10),debouncedListener("resize",n,250)},inputFocus:function(e,t){qsa([e,t].join(" ")).forEach((t=>{t.addEventListener("click",(s=>{if(window.innerWidth>=window.cannondaleBreakpoints.tablet){const s=t.closest(e);let i=s.querySelector('input[type="text"]');i||(i=s.querySelector(".magic-box-input input")),i&&i.focus()}}))}))},labelSwap:t=>{function s(t,s,i){0!==t.value.length?(s.classList.add("is-visible"),i&&t.classList.remove("select-placeholder"),e(s).next(".error-msg")[0]&&t.classList.add("input-error")):(i&&t.classList.add("select-placeholder"),s.classList.remove("is-visible"))}qsa(t).forEach((t=>{const i=e(t).next("input, select")[0],a="SELECT"===i.tagName;s(i,t,a),i.addEventListener("blur",(()=>s(i,t,a))),a?i.addEventListener("change",(()=>s(i,t,a))):i.addEventListener("keyup",(()=>s(i,t,a)))}))},hotspots:e=>{function t(){qsa(".hotspot-description, .hotspot-text-container").forEach((e=>e.classList.remove("active")))}document.addEventListener("click",(e=>{e.target.closest(".hotspot-point-container")||t()})),qsa(".hotspots-product-wrapper .hotspot-text-container, .hotspots-product-wrapper .hotspot-point").forEach((e=>e.addEventListener("click",(function(e){e.preventDefault(),t();const s=this.classList.contains("hotspot-text-container")?this:this.parentElement.querySelector(".hotspot-text-container"),i=qsa(".hotspot-description",s);i.length&&(s.classList.add("active"),i.forEach((e=>e.classList.add("active"))))}))))},video:e=>{function t(e,t){return t?`https://img.youtube.com/vi/${e}/mqdefault.jpg`:`http://i3.ytimg.com/vi/${e}/maxresdefault.jpg`}function s(e){const t=window.innerWidth,s=t<window.cannondaleBreakpoints.tablet?"data-poster-mobile":t>=window.cannondaleBreakpoints.desktop?"data-poster":"data-poster-tablet";return e.getAttribute(s)}qsa(e).forEach((e=>{const i=e.querySelector(".poster"),a=e.querySelector(".trigger"),r=e.querySelector(".responsive-iframe"),o=e.querySelector(".cta").cloneNode(!0),n=document.createElement("img"),l=e.getAttribute("data-videoid"),c=e.getAttribute("data-background-screen"),d=s(e);if(n.className="poster-image",n.alt="",i.appendChild(n),i.appendChild(o),c&&c.length>0){const t=e.querySelector(".video__text");t&&(t.style.backgroundColor=c)}const h=t=>{r.insertAdjacentHTML("beforeend",`<iframe width="560" height="315" src="${l}?rel=0&amp;autoplay=1&amp;modestbranding=1" frameborder="0" allow="autoplay" allowfullscreen></iframe>`),e.classList.add("is-open"),a.removeEventListener("click",h)};a.addEventListener("click",h),d&&d.length>0?(n.src=d,debouncedListener("resize",(()=>n.src=s(e)),250)):e.classList.contains("small")?(n.src=t(l,window.innerWidth>=window.cannondaleBreakpoints.tablet),debouncedListener("resize",(()=>n.src=t(l,window.innerWidth>=window.cannondaleBreakpoints.tablet)),250)):n.src=t(l,!1)}))},dropdown:e=>{"string"==typeof e?qsa(e).forEach((e=>{e.classList.contains("bike-registration")||new s(e)})):new s(e),s.setClickEvents()},searchVisibility:e=>{qsa(e).forEach((e=>{var t=e.querySelector("input"),s=e.querySelector(".visibility-toggle"),i=e.querySelector(".button"),a=e.querySelector(".predictive-results");function r(){a.classList.remove("is-visible")}t&&t.addEventListener("keyup",(function(){this.value.length?s.classList.add("is-visible"):r()})),i&&i.addEventListener("click",(function(){r()}))}))},stickyHeader:()=>{class e{constructor(){this.headerWrap=document.getElementById("site-header-wrap"),this.headerElem=document.querySelector(".site-header"),this.productFilter=document.querySelector(".filter-and-sort__status-and-sort"),this.searchBar=document.querySelector(".filter-and-sort__search-bar:not(.hidden)"),this.searchBarHeight=this.searchBar?this.searchBar.offsetHeight:0,this.billboardVideo=document.querySelector("main > .billboard-centered:first-child .html5-video, main > .lab71-billboard:first-child .html5-video"),this.hasContentSwap=!1,this.scrollY=window.scrollY,this.isStuck=!1,document.querySelector("main > .billboard-centered:first-child, main > .lab71-billboard:first-child")?this.headerWrap.style.height="0px":(this.updateHeaderHeightOffset(),window.debouncedListener("resize",(e=>this.updateHeaderHeightOffset()))),this.updateStickyStatus(),window.debouncedListener("resize",(e=>this.updateStickyStatus()),50),window.addEventListener("scroll",(e=>this.updateStickyStatus()))}addContent(e){const t=document.getElementById("MainNavigation").parentElement,s=this.headerElem.querySelector(".header-cart"),i=document.createElement("div");i.className="sticky-header__content",i.innerHTML=e,t.style.flexWrap="nowrap",s?t.insertBefore(i,s):t.appendChild(i),this.hasContentSwap=!0}updateHeaderHeightOffset(){this.headerWrap.style.height=[this.headerElem.offsetHeight,"px"].join("")}repaintBillboardVideo(){this.billboardVideo.style.display="none",window.setTimeout((()=>{this.billboardVideo.style.display="block"}),10)}stick(){this.isStuck=!0,this.headerWrap.classList.add("sticky-header"),this.headerElem.style.transitionDuration="0ms",this.headerElem.style.top="-"+this.headerElem.offsetHeight+"px",this.productFilter&&(this.productFilter.style.top=this.searchBarHeight+"px"),this.searchBar&&(this.searchBar.style.top="0px")}unstick(){this.isStuck=!1,this.headerWrap.classList.remove("sticky-header"),this.headerElem.style.transitionDuration="150ms",this.headerElem.style.top="0px",this.productFilter&&(this.productFilter.style.top=this.headerWrap.offsetHeight+this.searchBarHeight+"px"),this.searchBar&&(this.searchBar.style.top=this.headerWrap.offsetHeight+"px"),this.billboardVideo&&this.repaintBillboardVideo()}show(){this.headerElem.style.transitionDuration="250ms",this.headerElem.style.top="0px",this.productFilter&&(this.productFilter.style.top=this.headerWrap.offsetHeight+this.searchBarHeight+"px"),this.searchBar&&(this.searchBar.style.top=this.headerWrap.offsetHeight+"px")}hide(){this.headerElem.style.transitionDuration="250ms",this.headerElem.style.top="-"+this.headerElem.offsetHeight+"px",this.productFilter&&(this.productFilter.style.top=this.searchBarHeight+"px"),this.searchBar&&(this.searchBar.style.top="0px")}updateStickyStatus(){const e=window.scrollY<=this.scrollY;window.scrollY>this.headerElem.offsetHeight&&!this.isStuck?(this.stick(),this.hasContentSwap&&(window.scrollY>240?this.headerElem.classList.add("show-content"):this.headerElem.classList.remove("show-content"))):this.isStuck&&window.scrollY<=0?this.unstick():this.isStuck&&e?this.show():this.isStuck&&!e&&this.hide(),this.scrollY=window.scrollY}}window.preventStickyHeader?document.querySelector(".site-header").classList.add("sticky-eyebrow"):window.StickyHeader=new e},tabbedLayout:()=>{qsa(".tabbed-layout-js").forEach((e=>{const t=e.querySelectorAll(".tabbed-layout__trigger"),s=Array.from(e.querySelectorAll(".tabbed-layout__panel")).map((e=>({name:e.getAttribute("data-panel-name"),elem:e})));t.forEach((e=>{const i=e.getAttribute("data-panel-name");e.addEventListener("click",(a=>{s.forEach((e=>{e.name===i?e.elem.classList.add("is-active"):e.elem.classList.remove("is-active")})),t.forEach((t=>{t!==e&&t.classList.remove("is-active")})),e.classList.add("is-active")}))}))}))},productFilter:()=>{qsa(".all-sort-trigger").forEach((e=>e.addEventListener("click",(function(e){window.innerWidth<window.cannondaleBreakpoints.desktop?qsa(".sort-by").forEach((e=>e.classList.add("is-open"))):qsa(".sort-by").forEach((e=>e.classList.remove("is-open")))})))),qsa(".filter-product").forEach((e=>{e.querySelector(".menu-filter");var t=e.querySelector(".more-filters");function s(){qsa(".sort-by",e).forEach((e=>e.classList.remove("is-open")))}e.addEventListener("click",(s=>{const i=s.target.closest(".filter-trigger");i&&(i.classList.contains("is-active")?e.classList.remove("menu-is-open"):e.classList.add("menu-is-open"),i.classList.contains("top-level")||(qsa(".top-level",e).forEach((e=>e.classList.remove("is-active"))),t.classList.remove("is-open")))})),s(),debouncedListener("resize",(()=>{s(),qsa(".all-sort-trigger, .all-sort-panel").forEach((e=>e.classList.remove("is-active","is-open")))}),50)}))},showhide:()=>{function e(t){const s=t.getAttribute("data-trigger"),i=qsa(`[data-panel="${s}"]`),a=i[0].getAttribute("data-noscroll");if(qsa(".filter-product .dropdown.is-open").forEach((e=>e.classList.remove("is-open"))),t.classList.toggle("is-active"),i.forEach((s=>{!function(t,s){if(s.getAttribute("data-closebutton")&&!s.querySelector(".close")){const i=document.createElement("button");i.className="close trigger",i.addEventListener("click",(s=>{s.preventDefault(),e(t)})),s.appendChild(i)}}(t,s),s.classList.toggle("is-open")})),a){const e="mobile"===a?"noscroll-mobile":"noscroll";document.documentElement.classList.toggle(e,i[0].classList.contains("is-open"))}}document.addEventListener("click",(t=>{const s=t.target.closest("[data-trigger]");if(s)if(t.preventDefault(),s.classList.contains("no-self-close")&&s.classList.contains("is-active"));else{const t=s.parentElement,i="child"===s.getAttribute("data-swap")?t:t.closest(".multi-showhide");i&&qsa(".is-active",i).forEach((t=>{t!==s&&e(t)})),e(s)}}))},swaptext:e=>{qsa(e).forEach((e=>{e.addEventListener("click",(function(){const e=this.querySelector(".label")||this,t=e.textContent,s=this.getAttribute("data-swaptext");this.classList.toggle("swapped-text"),e.textContent=s,this.setAttribute("data-swaptext",t)}))}))},suspensionFilter:e=>{class t{constructor(e,t){this.elem=e,this.dataType=t;const s=this.elem.getAttribute("data-filter");this.area=document.querySelector(`.sortable-items[data-filtertarget="${s}"]`),this.select=e.querySelector("select"),this.options=[],this.items=[],this.newOpts=[],this.createArray()}clickHandler(){}closeAllItems(){const e=["is-open","is-active"];this.items.forEach((t=>{t.classList.remove(e.join())}))}createArray(){const e=`data-${this.dataType}`;this.items=qsa(`[${e}]`),this.items.forEach((t=>{const s=t.getAttribute(e);-1===this.options.indexOf(s)&&this.options.push(s)}))}initDropdown(){this.elem.classList.add("dropdown"),cannondaleJS.dropdown(this.elem),this.newOpts=qsa("a.option:not(.default)",this.elem),this.newOpts.forEach((e=>e.addEventListener("click",(t=>this.clickHandler(e)))))}}class s extends t{constructor(e){super(e,"filteritem"),this.createItems(),this.initDropdown(),this.filterLookup=Array.from(this.area.children).map((e=>({elem:e,val:e.getAttribute("data-filteritem")})))}clickHandler(e){this.closeAllItems();const t=e.getAttribute("data-value");"all"===t?this.filterLookup.forEach((e=>e.elem.classList.add("is-visible"))):this.filterLookup.forEach((e=>{e.val===t?e.elem.classList.add("is-visible"):e.elem.classList.remove("is-visible")}))}createItems(){const e=this.options.map((e=>`<option class="option" value="${e}">${e}</option>`)).join("");this.select.insertAdjacentHTML("beforeend",e)}}class i extends t{constructor(e){super(e,"sort"),this.initDropdown()}clickHandler(e){this.closeAllItems();const t="sort-ascending"===e.getAttribute("data-value")?this.sortAscending:this.sortDescending;this.items.sort(t).forEach((e=>this.area.appendChild(e)))}sortAscending(e,t){return t.getAttribute("data-sort")<e.getAttribute("data-sort")?1:-1}sortDescending(e,t){return t.getAttribute("data-sort")<e.getAttribute("data-sort")?-1:1}}qsa(e).forEach((e=>{"visibility"===e.getAttribute("data-filtertype")?new s(e):new i(e)}))},toggler:e=>{qsa(e).forEach((e=>{e.addEventListener("click",(function(){const e=this.getAttribute("data-toggletarget"),t=qsa(`[data-toggletarget="${e}"]`),s=qsa(`[data-totoggle="${e}"]`),i=this.getAttribute("data-togglestring");t.forEach((e=>e.classList.remove("is-active"))),this.classList.add("is-active"),s.forEach((e=>e.setAttribute("data-togglestring",i)))}))}))},AboutUsHeroHeight:()=>{const e=document.querySelector(".hero-about");function t(){const t=[window.innerHeight-document.querySelector(".site-header").offsetHeight,"px"].join("");e.style.height=t,e.querySelector(".content-container").style.height=t}e&&(t(),debouncedListener("resize",t,50))},errorPopups:()=>{let t=!1;function s(e,s){if(t&&!s)return!1;const i=e.parentElement,a=i.querySelector(".error-label__msg");if(a.scrollWidth>a.clientWidth){let e=i.querySelector(".error-label__popup");e||(e=document.createElement("div"),e.className="error-label__popup fade-elem faded",i.appendChild(e)),e.innerHTML=a.innerHTML,s?(e.classList.add("touch"),e.classList.toggle("faded")):(e.classList.remove("touch"),e.classList.remove("faded"))}}e(document).on("touchstart",".error-label__indicator, .error-label__msg",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),t=!0,s(this,!0)})),e(document).on("mouseenter",".error-label__indicator, .error-label__popup, .error-label__msg",(function(){s(this)})),e(document).on("mouseleave",".error-label__indicator, .error-label__popup, .error-label__msg",(function(){this.parentElement.querySelector(".error-label__popup").classList.add("faded")}))},ValidateForms:()=>{const e=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/,t=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,s=/^[\-\+]?(\d+|\d+\.?\d+)$/,i=/^[\w\s.,\-']*$/,a=/^[^A-Za-z]+$/;class r{constructor(e){if(this.field=e,this.name=this.field.name,this.parent=e.closest(".formField"),this.parentForm=e.closest("form"),this.errorSpan=document.createElement("span"),this.errorSpan.className="error-item error-label__msg",this.parent.appendChild(this.errorSpan),this.errorIndicator=document.createElement("div"),this.errorIndicator.className="error-item error-label__indicator",this.parent.appendChild(this.errorIndicator),this.errorPopup=document.createElement("div"),this.errorPopup.className="error-item error-label__popup fade-elem faded",this.parent.appendChild(this.errorPopup),this.ruleNames=[],this.validationFunctions=this.field.getAttribute("data-validetta").split(",").map((e=>{const t=e.split("["),s=t[0],i=t[1]?t[1].replace("]",""):null;return this.ruleNames.push(s),"equalTo"===s?(this.pairedField=this.parentForm.querySelector(`input[name="${i}"]`),this.isMatchMessage=this.field.getAttribute("data-vd-message-ismatch"),this.addEqualToListener()):"password"===s&&(this.isPasswordField=!0),{fn:this.generateRuleFunction(s,i),msg:this.field.getAttribute(`data-vd-message-${s}`),ruleName:s}})),this.isPasswordField&&(this.passwordRulesElem=this.parentForm.querySelector(".passwordRules"),this.passwordRules=this.passwordRulesElem.querySelectorAll("li")),this.parent.hasAttribute("data-server-error-key")){const e=window.formServerErrors[this.parent.getAttribute("data-server-error-key")];e&&(this.errorSpan.innerHTML=e,this.parent.classList.add("has-error"),this.errorSpan.parentElement.classList.add("has-error"))}}_testForMatch(){this.matchSpanStored||(this.matchSpanStored=this.errorSpan.innerHTML),this.field.value.length&&this.field.value===this.pairedField.value?(this.parent.classList.add("is-match"),this.errorSpan.innerHTML=this.isMatchMessage):(this.parent.classList.remove("is-match"),this.errorSpan.innerHTML=this.matchSpanStored)}addEqualToListener(){this.pairedField&&(this.field.addEventListener("keyup",(e=>this._testForMatch())),this.field.addEventListener("blur",(e=>this._testForMatch())),this.pairedField.addEventListener("keyup",(e=>this._testForMatch())),this.pairedField.addEventListener("blur",(e=>this._testForMatch())))}generateRuleFunction(r,o){switch(r){case"email":return()=>t.test(this.field.value.trim());case"equalTo":return()=>{try{return this.field.value.trim()===this.pairedField.value.trim()}catch(e){return console.warn("Validation equalTo error",e),!1}};case"minLength":return()=>this.field.value.trim().length>=parseInt(o);case"maxLength":return()=>this.field.value.trim().length<=parseInt(o);case"noSpecial":return()=>i.test(this.field.value);case"number":return()=>s.test(this.field.value.trim());case"password":return()=>e.test(this.field.value.trim());case"phone":return()=>a.test(this.field.value.trim());case"required":return()=>this.field.parentElement.classList.contains("hidden")||this.field.value.trim().length>0}}clearErrors(){this.parent.classList.remove("has-error"),this.errorSpan.parentElement.classList.remove("has-error")}setErrors(e){if(e.required)this.errorSpan.innerHTML=e.required;else if(this.isPasswordField){this.errorSpan.innerHTML=this.validationFunctions.filter((e=>"password"===e.ruleName))[0].msg;const t=Object.keys(e);this.passwordRules.forEach((e=>{t.indexOf(e.getAttribute("data-password-rule"))>-1?e.classList.add("invalidated"):e.classList.remove("invalidated")})),this.passwordRulesElem.classList.remove("hidden")}else this.errorSpan.innerHTML=Object.keys(e).map((t=>e[t])).join("<br>");this.parent.classList.add("has-error"),this.errorSpan.parentElement.classList.add("has-error")}validate(){if(this.field.closest(".ignore-validation"))return null;let e=!0;if(this.matchSpanStored=null,"checkbox"===this.field.type)return this.field.checked?null:(e=!1,{required:this.validationFunctions.filter((e=>"required"===e.ruleName))[0].msg});if(0===this.field.value.trim().length&&this.ruleNames.indexOf("required")<0)return null;const t=this.validationFunctions.reduce(((t,s)=>(s.fn()||(e=!1,t[s.ruleName]=s.msg),t)),{});return e?null:t}}class o{constructor(e){this.formElem=e,this.submitButtonWithState=this.formElem.querySelector("button.with-state[type=submit]"),this.fields=qsa("[data-validetta]",this.formElem).map((e=>{const t=new r(e);return t.isPasswordField&&(this.hasPasswordField=!0,this.passwordRulesElem=t.passwordRulesElem,this.passwordRules=t.passwordRules),t})),this.formElem.addEventListener("submit",(e=>{if(!this.validate())return e.preventDefault(),e.stopImmediatePropagation(),!1;this.submitButtonWithState&&(this.submitButtonWithState.classList.add("submitted"),this.submitButtonWithState.setAttribute("disabled",!0)),this.hasPasswordField&&this.passwordRulesElem&&(this.passwordRules.forEach((e=>{e.classList.remove("invalidated")})),this.passwordRulesElem.classList.add("hidden"))}))}validate(){this.hasPasswordField&&this.passwordRulesElem.classList.add("hidden");return 0===this.fields.reduce(((e,t)=>{const s=t.validate(this.fields);return s?(e.push(s),t.setErrors(s)):t.clearErrors(),e}),[]).length}}qsa(".validettaValidate").forEach((e=>{new o(e)})),window.createValidatedForm=e=>new o(e)},ProgressiveLoadingImages:()=>{qsa(".prog-load.is-img-loading").forEach((e=>{!function(e){let t=e.querySelector("picture:nth-child(2)");if(t){let s,i=qsa("source",t),a=t.querySelector("img"),r=a.getAttribute("data-src"),o=function(){e.classList.add("is-img-loaded"),e.classList.remove("is-img-loading"),a.onload=null,null!==s&&(window.clearTimeout(s),s=null)};i.forEach((e=>{let t=e.getAttribute("data-srcset");t&&(e.setAttribute("srcset",t),e.removeAttribute("data-srcset"))})),a.onload=o,s=window.setTimeout(o,5e3),r&&(a.setAttribute("src",r),a.removeAttribute("data-src"))}else e.classList.remove("is-img-loading")}(e)}))}},window.cannondaleJS.init(),window.callbacks.frontendJSLoaded&&window.callbacks.frontendJSLoaded.length&&window.callbacks.frontendJSLoaded.forEach((e=>e()));window.addEventListener("LOCALLY_region_update",(async e=>{console.log("locally region update",e);const{city:t,country:s,lat:i,lng:a,state:r}=e.detail;window.LocationManager.updateCityDisplay({cityState:[t,r].join(),country:s,latitude:i,longitude:a,searchText:[t,r,s].join(", ")})})),window.switchLiveEventCallback=e=>{let t,s;switch(console.log("got event",e),e.id){case 1:t="impression",s="Locally Product Locator - PDP - Locally widget loaded on PDP";break;case 4:t="click",s="Locally Product Locator - PDP - user click on Store link";break;case 5:t="click",s="Locally Product Locator - PDP - user click on location change";break;case 6:t="click",s="Locally Product Locator - PDP - user click on 'show all local options'";break;case 7:t="impression",s="Locally Product Locator - Modal - Product Locator modal loaded";break;case 9:t="click",s="Locally Product Locator - Modal - user click on Store link (opens details panel)";break;case 21:t="click",s="Locally Product Locator - Modal - store detail view - user click on Store 'Browse Stock' button";break;case 38:t="click",s="Locally Product Locator - Modal - browse inventory - user click on Product Thumb";break;case 41:t="click",s="Locally Product Locator - Modal - product detail view - user click on `Buy Now`";break;case 46:t="click",s="Locally Product Locator - Modal - product overview view - user click on Call Store Now button";break;case 47:t="click",s="Locally Product Locator - Modal - product overview view - user click on Buy Now button";break;case 48:t="impression",s="Locally Product Locator - Modal - browse inventory - product loaded / product impression";break;case 49:t="impression",s="Locally Product Locator - Modal - product overview view - store loaded / store impression";break;case 65:t="impression",s="Locally Product Locator - Modal - Locally Product Detail Page opened";break;case 70:t="click",s="Locally Product Locator - Modal - Locally product detail page - user click on `ROPIS`";break;case 79:t="click",s="Locally Product Locator - Modal - product overview view - user click on ROPIS button";break;case 82:t="impression",s="Locally Product Locator - Modal - Product added to cart";break;case 83:t="click",s="Locally Product Locator - Modal - Order Placed";break;case 56:t="impression",s="Locally Store Locator - Modal - inline store locator loaded";break;case 59:t="click",s="Locally Store Locator - Modal - store detail view - user click on Store 'Browse Stock' button";break;case 61:t="impression",s="Locally Store Locator - Modal - browse inventory - product loaded / product impression";break;case 63:t="click",s="Locally Store Locator - Modal - browse inventory - user click on Product Thumb";break;case 66:t="impression",s="Locally Store Locator - Modal - Locally Product Detail Page opened";break;case 68:t="click",s="Locally Store Locator - Modal - Locally product detail page - user click on `Buy Now`";break;case 71:t="click",s="Locally Store Locator - Modal - Locally product detail page - user click on `ROPIS`";break;case 73:t="click",s="Locally Store Locator - Modal - Locally product detail page - user click on `Call Store Now`";break;case 75:t="impression",s="Locally Store Locator - Modal - store loaded / store impression";break;case 77:t="click",s="Locally Store Locator - Modal - user click on Store link (opens details panel)";break;case 80:t="impression",s="Locally Store Locator - Modal - Product added to cart";break;case 84:t="click",s="Locally Store Locator - Modal - Order Placed"}t&&s&&ga("gtm4.send","event","UX",t,s)}}(jQuery);