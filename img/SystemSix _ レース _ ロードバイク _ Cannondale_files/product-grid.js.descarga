!function(){const e=document.documentElement.getAttribute("lang"),t=window.SITECORE_LANGUAGE||e,n=`/${e.toLowerCase()}/api/inventoryskus`,a=/devc[md]/i.test(window.location.href),i=a?"cannondaledev":"cannondale",o=window.COVEO_SOURCE&&window.COVEO_SOURCE.length?window.COVEO_SOURCE:a?"DorelSports-Push-Development":"Cannondale-Push-Staging",r=`@language=="${t}" @firstavailableon<=${window.DAYS_IN_ADVANCE_TO_PREVIEW||"today"}`,d=location.href.split("#q=")[1],s=window.location.href.indexOf("search-results")>-1,l=new window.LoadingGraphic(document.querySelector(".filter-and-sort__container"),{position:"absolute",background:"white"}),c={ConstantQueryExpression:`@source==${o}`,AdvancedQueryExpression:r,Pipeline:i,EnableDuplicateFilter:!1,NumberOfResults:1e3},u=Array.from(document.querySelectorAll(".filter-and-sort__filter")).reduce(((e,t)=>{const n=t.dataset.filterkey;return n&&"finalprice"!==n&&e.push(n),e}),[]),p=document.getElementById("ProductGrid"),w=new window.FilterAndSort(p,{filterKeys:u,sortOptions:{featured:{fn:()=>1},finalprice:{fn:(e,t)=>e-t}},language:t,translations:window.PRODUCT_GRID_TRANSLATION_VALUES,isSearchPage:s});if(d)c.QueryString=decodeURIComponent(d.split("&")[0]);else{const g=window.plpSearchData.categories.map((e=>e.replace(/[}{]/g,"'"))).join(),S=window.plpSearchData.modelYear&&window.plpSearchData.modelYear.length?` @activemodelyear=${window.plpSearchData.modelYear}`:"";c.AdvancedQueryExpression+=` @categories=(${g})${S}`}async function h(e,t){l.start();const a=window.COMMERCE_ENABLED?await window.EndpointManager.get(n):[],i=await window.EndpointManager.post("/api/coveo/search",e).then((e=>JSON.parse(e.QueryResult))).then((e=>{const t=e.results.map((e=>window.utilities.selectRawCoveoData(e.raw,a,w.TEXT.instockonline)));return l.end(),t})),o=window.utilities.gaList(i);t&&!s&&0===i.length?w.elem.classList.add("hidden"):w.updateProducts({products:i,gaSelectItemHandler:o})}document.addEventListener("DOMContentLoaded",(function(){h(c,!0)}));const f=p.querySelector(".filter-and-sort__search-bar");if(s&&f){document.body.classList.add("search-page");const m={input:f.querySelector(".filter-and-sort__search-bar__input"),clear:f.querySelector(".filter-and-sort__search-bar__clear"),button:f.querySelector(".filter-and-sort__search-bar__button")};function E(){m.input.value.length>0?m.clear.classList.remove("hidden"):m.clear.classList.add("hidden")}function _(){const e=m.input.value.trim();if(e.length>0){const t=JSON.parse(JSON.stringify(c));t.QueryString=e,h(t)}}d&&(m.input.value=decodeURIComponent(d.split("&")[0])),E(),f.classList.remove("hidden"),m.input.addEventListener("input",E),m.input.addEventListener("keydown",(e=>{13===e.keyCode&&_()})),m.clear.addEventListener("click",(function(){m.input.value="",m.clear.classList.add("hidden")})),m.button.addEventListener("click",_)}}();